import{c as y,l as E,r as i,u as I,j as e,B as x,b as A}from"./index-Dr8jgfVR.js";import{C as D,a as M,Q as L,E as O}from"./index-Cl3NUfcO.js";import{I as R}from"./input-CEbwaS2S.js";import{f as H}from"./use-vaults-MLlSs9OK.js";import{S as z}from"./shield-9v7kfTWE.js";import{A as $}from"./arrow-left-C8ze6UP3.js";import{m as o}from"./proxy-N6T_XOox.js";import{K as B}from"./key-B79qRl8B.js";import{C as P,D as V,H as _}from"./hard-drive-dKzcqw--.js";import{M as F}from"./mail-DTVmsDvy.js";import{A as q}from"./index-CHBNmsLK.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=y("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function G({expiresAt:d}){const[s,h]=i.useState(null);return i.useEffect(()=>{const l=()=>{const m=new Date().getTime(),n=new Date(d).getTime()-m;if(n<=0){h(null);return}h({h:Math.floor(n/36e5),m:Math.floor(n%36e5/6e4),s:Math.floor(n%6e4/1e3)})};l();const r=setInterval(l,1e3);return()=>clearInterval(r)},[d]),s?e.jsxs("div",{className:"flex items-center gap-2 font-mono text-sm md:text-base font-bold text-primary",children:[e.jsx("span",{className:"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center",children:s.h.toString().padStart(2,"0")}),e.jsx("span",{className:"text-zinc-500",children:":"}),e.jsx("span",{className:"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center",children:s.m.toString().padStart(2,"0")}),e.jsx("span",{className:"text-zinc-500",children:":"}),e.jsx("span",{className:"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center",children:s.s.toString().padStart(2,"0")})]}):e.jsx("span",{className:"text-zinc-500 font-mono",children:"Expired"})}function re(){const[,d]=E("/success/:id"),[s,h]=i.useState(""),{toast:l}=I(),[r,m]=i.useState("link"),[f,n]=i.useState(""),[g,j]=i.useState(!1),[S,N]=i.useState(!1),[v,w]=i.useState(!1),u=(d==null?void 0:d.id)||"",{data:t}=H(u);i.useEffect(()=>{const c=window.location.hash.match(/#code=(\d{6})/);c&&h(c[1])},[]);const p=`${window.location.origin}/v/${u}#key=${(t==null?void 0:t.wrappedKey)||""}`,b=async(a,c)=>{await navigator.clipboard.writeText(a),c==="link"?(N(!0),setTimeout(()=>N(!1),2e3)):(w(!0),setTimeout(()=>w(!1),2e3)),l({title:"Copied to clipboard",description:c==="link"?"Secure link ready to share.":"Access code ready to share."})},C=async()=>{if(navigator.share)try{await navigator.share({title:"Secure Vault",text:"Here is the comprehensive secure link to access the files.",url:p})}catch(a){console.error("Share failed",a)}else b(p,"link")},T=async()=>{if(f){j(!0);try{await fetch(`/api/vaults/${u}/email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:f,fullCode:s})}),l({title:"Email Sent",description:"Recipient notified securely."}),n("")}catch{l({variant:"destructive",title:"Failed to send",description:"Could not send email."})}finally{j(!1)}}};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col bg-background text-foreground selection:bg-primary/30",children:[e.jsx("div",{className:"fixed inset-0 grid-bg opacity-30 pointer-events-none"}),e.jsx("div",{className:"fixed top-[-10%] left-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"}),e.jsx("div",{className:"fixed bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("header",{className:"relative z-10 px-6 py-6 flex justify-between items-center max-w-6xl mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center border border-primary/20",children:e.jsx(z,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold font-mono tracking-tight text-lg leading-none",children:["SECURE",e.jsx("span",{className:"text-primary",children:"VAULT"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest",children:"Encrypted Transfer"})]})]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>window.location.href="/",className:"gap-2 border-zinc-800 hover:bg-zinc-900",children:[e.jsx($,{className:"w-4 h-4"})," New Transfer"]})]}),e.jsxs("main",{className:"relative z-10 flex-1 w-full max-w-5xl mx-auto px-4 md:px-6 py-4 flex flex-col gap-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch",children:[s&&e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-card p-6 md:p-8 flex flex-col items-center justify-center text-center border-l-4 border-l-primary relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/5 animate-pulse rounded-3xl pointer-events-none"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(B,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"text-xs font-bold text-zinc-400 uppercase tracking-[0.2em]",children:"Access PIN"})]}),e.jsx("div",{className:"flex items-center gap-4 mb-4 scale-110",children:e.jsxs("div",{className:"font-mono text-5xl md:text-6xl font-black tracking-widest text-white drop-shadow-[0_0_25px_rgba(16,185,129,0.3)] select-all",children:[s.slice(0,3),"-",s.slice(3,6)]})}),e.jsxs(x,{variant:"ghost",size:"sm",className:"gap-2 text-zinc-500 hover:text-white hover:bg-white/5",onClick:()=>b(s,"code"),children:[v?e.jsx(D,{className:"w-4 h-4 text-green-500"}):e.jsx(M,{className:"w-4 h-4"}),v?"Copied":"Copy Code"]})]}),t&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass-card p-6 flex flex-col justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 text-zinc-400",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-lg",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider",children:"Expiration"}),e.jsx("p",{className:"text-[10px] text-zinc-500",children:"Auto-deletion timer"})]})]}),e.jsx(G,{expiresAt:t.expiresAt})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 text-zinc-400",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-lg",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider",children:"Downloads"}),e.jsx("p",{className:"text-[10px] text-zinc-500",children:"Remaining limit"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-mono text-xl font-bold text-white",children:t.maxDownloads-t.downloadCount}),e.jsx("span",{className:"text-zinc-600 text-sm font-mono mx-1",children:"/"}),e.jsx("span",{className:"text-zinc-600 text-sm font-mono",children:t.maxDownloads})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 text-zinc-400",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-lg",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider",children:"Total Size"}),e.jsxs("p",{className:"text-[10px] text-zinc-500",children:[t.files.length," Files"]})]})]}),e.jsxs("span",{className:"font-mono text-base font-bold text-zinc-300",children:[(t.files.reduce((a,c)=>a+c.totalSize,0)/(1024*1024)).toFixed(2)," MB"]})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[e.jsx("div",{className:"w-full lg:w-1/3 flex flex-col gap-6",children:e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-1 rounded-3xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"bg-zinc-950/80 p-8 rounded-[22px] flex flex-col items-center text-center relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-primary/5 to-transparent animate-scanline pointer-events-none"}),e.jsxs("div",{className:"relative bg-zinc-900/50 border border-zinc-800 p-4 rounded-2xl shadow-2xl mb-6 group-hover:border-primary/50 transition-colors duration-500",children:[e.jsx(L,{value:p,size:200,level:"H",includeMargin:!0,bgColor:"#09090b",fgColor:"#10b981",className:"w-full h-full rounded-lg"}),e.jsx("div",{className:"absolute -top-1 -left-1 w-6 h-6 border-t-2 border-l-2 border-primary rounded-tl-xl opacity-50"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 border-t-2 border-r-2 border-primary rounded-tr-xl opacity-50"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-6 h-6 border-b-2 border-l-2 border-primary rounded-bl-xl opacity-50"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 border-b-2 border-r-2 border-primary rounded-br-xl opacity-50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h2",{className:"text-xl font-bold text-white tracking-tight flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-primary"}),"Scan to Download"]}),e.jsx("p",{className:"text-xs text-zinc-500 mx-auto",children:"Instant mobile access. No app required."})]})]})})}),e.jsx("div",{className:"w-full lg:w-2/3",children:e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"glass-card h-full min-h-[450px] flex flex-col",children:[e.jsxs("div",{className:"flex border-b border-white/5",children:[e.jsxs("button",{onClick:()=>m("link"),className:`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${r==="link"?"text-primary border-b-2 border-primary bg-primary/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900/50"}`,children:[e.jsx(K,{className:"w-4 h-4"})," Share Link"]}),e.jsxs("button",{onClick:()=>m("email"),className:`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${r==="email"?"text-primary border-b-2 border-primary bg-primary/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900/50"}`,children:[e.jsx(F,{className:"w-4 h-4"})," Email"]}),e.jsxs("button",{onClick:()=>m("burn"),className:`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${r==="burn"?"text-rose-500 border-b-2 border-rose-500 bg-rose-500/5":"text-zinc-500 hover:text-rose-400 hover:bg-rose-900/10"}`,children:[e.jsx(k,{className:"w-4 h-4"})," Burn"]})]}),e.jsx("div",{className:"p-8 md:p-10 flex-1 flex flex-col justify-center",children:e.jsxs(q,{mode:"wait",children:[r==="link"&&e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex-1 flex flex-col justify-center space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:"Ready to Share"}),e.jsx("p",{className:"text-zinc-400",children:"Copy the secure link below or use the share sheet."})]}),e.jsxs("div",{className:"bg-zinc-950 p-5 rounded-xl border border-zinc-800 flex items-center gap-4 group hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"p-3 bg-zinc-900 rounded-lg group-hover:bg-primary/20 transition-colors",children:e.jsx(O,{className:"w-6 h-6 text-zinc-500 group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-xs text-zinc-500 uppercase font-bold mb-1",children:"Encrypted Link"}),e.jsx("p",{className:"text-sm md:text-base font-mono text-zinc-300 truncate selection:bg-primary/30",children:p})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{size:"lg",className:"cyber-btn w-full h-14 text-base",onClick:()=>b(p,"link"),children:S?"COPIED!":"COPY LINK"}),e.jsx(x,{size:"lg",variant:"secondary",className:"w-full h-14 text-base border-zinc-700 bg-zinc-800 hover:bg-zinc-700",onClick:C,children:"OPEN SHARE SHEET"})]})]},"link"),r==="email"&&e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex-1 flex flex-col justify-center space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:"Secure Dispatch"}),e.jsx("p",{className:"text-zinc-400",children:"Send an automated email notification with access details."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-zinc-500 ml-1",children:"Recipient Email"}),e.jsx(R,{placeholder:"recipient@example.com",className:"h-14 text-lg bg-zinc-950 border-zinc-800 focus:ring-primary/20",value:f,onChange:a=>n(a.target.value)})]}),e.jsx(x,{size:"lg",className:"cyber-btn w-full h-14 text-base",onClick:T,disabled:g,children:g?e.jsx(A,{className:"w-6 h-6 animate-spin"}):"SEND NOTIFICATION"})]}),e.jsxs("div",{className:"py-4 px-6 bg-primary/5 rounded-xl border border-primary/10 flex items-start gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-primary/80 leading-relaxed",children:"Security Note: We only send the unique access link and code. Actual files are never attached to emails, ensuring zero-knowledge privacy."})]})]},"email"),r==="burn"&&e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex-1 flex flex-col justify-center space-y-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-2 border-2 border-rose-500/20 shadow-[0_0_30px_rgba(244,63,94,0.2)]",children:e.jsx(k,{className:"w-10 h-10 text-rose-500"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-rose-500",children:"Initiate Self-Destruct"}),e.jsx("p",{className:"text-zinc-400 max-w-md mx-auto",children:"This will immediately purge all encryption keys, metadata, and file chunks from the server."})]}),e.jsx("div",{className:"p-4 bg-rose-950/30 border border-rose-900/50 rounded-xl",children:e.jsx("p",{className:"text-sm text-rose-300 font-bold",children:"WARNING: THIS ACTION CANNOT BE UNDONE."})}),e.jsx(x,{size:"lg",variant:"destructive",className:"w-full h-14 text-base bg-rose-600 hover:bg-rose-700 font-bold tracking-wider",onClick:()=>l({title:"Simulation Mode",description:"Backend integration pending for deletion."}),children:"CONFIRM DESTRUCTION"})]},"burn")]})})]})})]})]})]})}export{re as default};
