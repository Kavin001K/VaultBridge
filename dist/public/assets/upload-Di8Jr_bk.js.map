{"version":3,"file":"upload-Di8Jr_bk.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js","../../../node_modules/lucide-react/dist/esm/icons/cloud-off.js","../../../node_modules/lucide-react/dist/esm/icons/cloud-upload.js","../../../node_modules/lucide-react/dist/esm/icons/folder-archive.js","../../../client/src/lib/fileStorage.ts","../../../client/src/components/file-dropzone.tsx","../../../client/src/components/encryption-progress.tsx","../../../client/src/lib/uploadConfig.ts","../../../client/src/pages/upload.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleCheckBig = createLucideIcon(\"CircleCheckBig\", [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CloudOff = createLucideIcon(\"CloudOff\", [\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }],\n  [\"path\", { d: \"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193\", key: \"yfwify\" }],\n  [\n    \"path\",\n    { d: \"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07\", key: \"jlfiyv\" }\n  ]\n]);\n\nexport { CloudOff as default };\n//# sourceMappingURL=cloud-off.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CloudUpload = createLucideIcon(\"CloudUpload\", [\n  [\"path\", { d: \"M12 13v8\", key: \"1l5pq0\" }],\n  [\"path\", { d: \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\", key: \"1pljnt\" }],\n  [\"path\", { d: \"m8 17 4-4 4 4\", key: \"1quai1\" }]\n]);\n\nexport { CloudUpload as default };\n//# sourceMappingURL=cloud-upload.js.map\n","/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FolderArchive = createLucideIcon(\"FolderArchive\", [\n  [\"circle\", { cx: \"15\", cy: \"19\", r: \"2\", key: \"u2pros\" }],\n  [\n    \"path\",\n    {\n      d: \"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1\",\n      key: \"1jj40k\"\n    }\n  ],\n  [\"path\", { d: \"M15 11v-1\", key: \"cntcp\" }],\n  [\"path\", { d: \"M15 17v-2\", key: \"1279jj\" }]\n]);\n\nexport { FolderArchive as default };\n//# sourceMappingURL=folder-archive.js.map\n","/**\n * IndexedDB File Storage\n * Persists selected files across page refreshes for better UX\n */\n\nconst DB_NAME = 'vaultbridge-file-cache';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'pending-files';\nconst SETTINGS_STORE = 'upload-settings';\n\ninterface StoredFile {\n    id: string;\n    name: string;\n    type: string;\n    size: number;\n    lastModified: number;\n    data: ArrayBuffer;\n    addedAt: number;\n}\n\ninterface UploadSettings {\n    id: string;\n    expiresIn: number;\n    maxDownloads: number;\n}\n\n// Open Database\nfunction openDB(): Promise<IDBDatabase> {\n    return new Promise((resolve, reject) => {\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve(request.result);\n\n        request.onupgradeneeded = (event) => {\n            const db = (event.target as IDBOpenDBRequest).result;\n\n            // Files store\n            if (!db.objectStoreNames.contains(STORE_NAME)) {\n                db.createObjectStore(STORE_NAME, { keyPath: 'id' });\n            }\n\n            // Settings store\n            if (!db.objectStoreNames.contains(SETTINGS_STORE)) {\n                db.createObjectStore(SETTINGS_STORE, { keyPath: 'id' });\n            }\n        };\n    });\n}\n\n// Generate unique ID for file\nfunction generateFileId(file: File): string {\n    return `${file.name}-${file.size}-${file.lastModified}`;\n}\n\n/**\n * Save files to IndexedDB\n */\nexport async function saveFilesToStorage(files: File[]): Promise<void> {\n    if (files.length === 0) {\n        await clearStoredFiles();\n        return;\n    }\n\n    try {\n        // CRITICAL: Read all file buffers BEFORE starting the transaction.\n        // IndexedDB transactions auto-commit when the event loop is idle,\n        // so async operations like arrayBuffer() must complete first.\n        const fileDataPromises = files.map(async (file) => ({\n            file,\n            buffer: await file.arrayBuffer()\n        }));\n        const fileData = await Promise.all(fileDataPromises);\n\n        // Now start the transaction with all data ready\n        const db = await openDB();\n        const tx = db.transaction(STORE_NAME, 'readwrite');\n        const store = tx.objectStore(STORE_NAME);\n\n        // Clear existing files first\n        store.clear();\n\n        // Save each file (synchronous puts, no async inside transaction)\n        for (const { file, buffer } of fileData) {\n            const storedFile: StoredFile = {\n                id: generateFileId(file),\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                lastModified: file.lastModified,\n                data: buffer,\n                addedAt: Date.now()\n            };\n            store.put(storedFile);\n        }\n\n        await new Promise<void>((resolve, reject) => {\n            tx.oncomplete = () => resolve();\n            tx.onerror = () => reject(tx.error);\n        });\n\n        db.close();\n    } catch (error) {\n        console.warn('[FileStorage] Failed to save files:', error);\n    }\n}\n\n/**\n * Load files from IndexedDB\n */\nexport async function loadFilesFromStorage(): Promise<File[]> {\n    try {\n        const db = await openDB();\n        const tx = db.transaction(STORE_NAME, 'readonly');\n        const store = tx.objectStore(STORE_NAME);\n\n        const request = store.getAll();\n\n        const storedFiles = await new Promise<StoredFile[]>((resolve, reject) => {\n            request.onsuccess = () => resolve(request.result || []);\n            request.onerror = () => reject(request.error);\n        });\n\n        db.close();\n\n        // Convert back to File objects\n        const files: File[] = storedFiles.map(sf => {\n            return new File([sf.data], sf.name, {\n                type: sf.type,\n                lastModified: sf.lastModified\n            });\n        });\n\n        // Filter out files older than 24 hours (auto-cleanup)\n        const oneDayAgo = Date.now() - (24 * 60 * 60 * 1000);\n        const validFiles = storedFiles.filter(sf => sf.addedAt > oneDayAgo);\n\n        if (validFiles.length !== storedFiles.length) {\n            // Re-save only valid files\n            const validFileObjs = validFiles.map(sf =>\n                new File([sf.data], sf.name, { type: sf.type, lastModified: sf.lastModified })\n            );\n            await saveFilesToStorage(validFileObjs);\n            return validFileObjs;\n        }\n\n        return files;\n    } catch (error) {\n        console.warn('[FileStorage] Failed to load files:', error);\n        return [];\n    }\n}\n\n/**\n * Clear all stored files\n */\nexport async function clearStoredFiles(): Promise<void> {\n    try {\n        const db = await openDB();\n        const tx = db.transaction(STORE_NAME, 'readwrite');\n        const store = tx.objectStore(STORE_NAME);\n        store.clear();\n\n        await new Promise<void>((resolve, reject) => {\n            tx.oncomplete = () => resolve();\n            tx.onerror = () => reject(tx.error);\n        });\n\n        db.close();\n    } catch (error) {\n        console.warn('[FileStorage] Failed to clear files:', error);\n    }\n}\n\n/**\n * Save upload settings\n */\nexport async function saveUploadSettings(expiresIn: number, maxDownloads: number): Promise<void> {\n    try {\n        const db = await openDB();\n        const tx = db.transaction(SETTINGS_STORE, 'readwrite');\n        const store = tx.objectStore(SETTINGS_STORE);\n\n        const settings: UploadSettings = {\n            id: 'current',\n            expiresIn,\n            maxDownloads\n        };\n\n        store.put(settings);\n\n        await new Promise<void>((resolve, reject) => {\n            tx.oncomplete = () => resolve();\n            tx.onerror = () => reject(tx.error);\n        });\n\n        db.close();\n    } catch (error) {\n        console.warn('[FileStorage] Failed to save settings:', error);\n    }\n}\n\n/**\n * Load upload settings\n */\nexport async function loadUploadSettings(): Promise<{ expiresIn: number; maxDownloads: number } | null> {\n    try {\n        const db = await openDB();\n        const tx = db.transaction(SETTINGS_STORE, 'readonly');\n        const store = tx.objectStore(SETTINGS_STORE);\n\n        const request = store.get('current');\n\n        const settings = await new Promise<UploadSettings | undefined>((resolve, reject) => {\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n        });\n\n        db.close();\n\n        if (settings) {\n            return { expiresIn: settings.expiresIn, maxDownloads: settings.maxDownloads };\n        }\n\n        return null;\n    } catch (error) {\n        console.warn('[FileStorage] Failed to load settings:', error);\n        return null;\n    }\n}\n\n/**\n * Check if there are stored files\n */\nexport async function hasStoredFiles(): Promise<boolean> {\n    try {\n        const db = await openDB();\n        const tx = db.transaction(STORE_NAME, 'readonly');\n        const store = tx.objectStore(STORE_NAME);\n\n        const request = store.count();\n\n        const count = await new Promise<number>((resolve, reject) => {\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n        });\n\n        db.close();\n        return count > 0;\n    } catch (error) {\n        return false;\n    }\n}\n","import { useCallback, useState, useEffect, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { UploadCloud, File as FileIcon, X, AlertCircle, FolderArchive, Loader2, CheckCircle2, CloudOff, HardDrive } from \"lucide-react\";\nimport { zip, type Zippable } from \"fflate\";\nimport { saveFilesToStorage, loadFilesFromStorage, clearStoredFiles } from \"@/lib/fileStorage\";\n\ninterface FileDropzoneProps {\n  onFilesSelected: (files: File[]) => void;\n  disabled?: boolean;\n  onDragStateChange?: (isDragging: boolean) => void;\n}\n\nexport function FileDropzone({ onFilesSelected, disabled, onDragStateChange }: FileDropzoneProps) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [persistenceStatus, setPersistenceStatus] = useState<'idle' | 'saving' | 'saved' | 'restored' | 'error'>('idle');\n  const isInitialMount = useRef(true);\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Load persisted files on mount\n  useEffect(() => {\n    const loadPersistedFiles = async () => {\n      try {\n        const storedFiles = await loadFilesFromStorage();\n        if (storedFiles.length > 0) {\n          setSelectedFiles(storedFiles);\n          onFilesSelected(storedFiles);\n          setPersistenceStatus('restored');\n\n          // Clear the 'restored' status after 3 seconds\n          setTimeout(() => setPersistenceStatus('idle'), 3000);\n        }\n      } catch (error) {\n        console.warn('[FileDropzone] Failed to load persisted files:', error);\n      }\n    };\n\n    loadPersistedFiles();\n  }, []); // Empty deps - only run on mount\n\n  // Save files to IndexedDB when they change (debounced)\n  useEffect(() => {\n    // Skip initial mount to avoid clearing storage\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n      return;\n    }\n\n    // Clear any pending save\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n\n    // Debounce save to avoid excessive writes\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        setPersistenceStatus('saving');\n        await saveFilesToStorage(selectedFiles);\n        setPersistenceStatus(selectedFiles.length > 0 ? 'saved' : 'idle');\n\n        // Auto-clear 'saved' status after 2 seconds\n        if (selectedFiles.length > 0) {\n          setTimeout(() => setPersistenceStatus('idle'), 2000);\n        }\n      } catch (error) {\n        console.warn('[FileDropzone] Failed to persist files:', error);\n        setPersistenceStatus('error');\n      }\n    }, 500);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n      }\n    };\n  }, [selectedFiles]);\n\n  // Notify parent of drag state changes\n  useEffect(() => {\n    onDragStateChange?.(isDragging);\n  }, [isDragging, onDragStateChange]);\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    if (!disabled) setIsDragging(true);\n  };\n\n  const handleDragLeave = () => setIsDragging(false);\n\n  const [isScanning, setIsScanning] = useState(false);\n\n  // Helper to read FileEntry\n  const scanEntry = (entry: any): Promise<{ [path: string]: File }> => {\n    return new Promise((resolve) => {\n      if (entry.isFile) {\n        entry.file((file: File) => {\n          resolve({ [entry.fullPath]: file });\n        });\n      } else if (entry.isDirectory) {\n        const reader = entry.createReader();\n        const readEntries = () => {\n          reader.readEntries(async (entries: any[]) => {\n            if (entries.length === 0) {\n              resolve({});\n              return;\n            }\n            const promises = entries.map(e => scanEntry(e));\n            const results = await Promise.all(promises);\n            const combined = results.reduce((acc, curr) => ({ ...acc, ...curr }), {});\n\n            // Recursively read more if limit not reached (handled by browser usually but readEntries might need loop)\n            // Simplified for standard cases\n            resolve(combined);\n          });\n        };\n        readEntries();\n      } else {\n        resolve({});\n      }\n    });\n  };\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    if (disabled) return;\n\n    const items = e.dataTransfer.items;\n    if (!items || items.length === 0) return;\n\n    // Check for directory\n    let hasDirectory = false;\n    const entries: any[] = [];\n    for (let i = 0; i < items.length; i++) {\n      const entry = items[i].webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n        if (entry.isDirectory) hasDirectory = true;\n      }\n    }\n\n    if (hasDirectory) {\n      setIsScanning(true);\n      try {\n        const allFiles: { [path: string]: File } = {};\n\n        // Scan Recursively\n        for (const entry of entries) {\n          const result = await scanEntry(entry);\n          Object.assign(allFiles, result);\n        }\n\n        // Create Zip Structure\n        const zipData: Zippable = {};\n        for (const [fullPath, file] of Object.entries(allFiles)) {\n          // Remove leading slash for zip path\n          const zipPath = fullPath.startsWith('/') ? fullPath.slice(1) : fullPath;\n          const buffer = new Uint8Array(await file.arrayBuffer());\n          zipData[zipPath] = buffer;\n        }\n\n        // Zip It\n        zip(zipData, { level: 6 }, (err, data) => {\n          if (err) {\n            console.error(\"Zipping failed\", err);\n            setIsScanning(false);\n            return;\n          }\n\n          // Create Archive File\n          const zipFile = new File([data as any], \"archive.zip\", { type: \"application/zip\" });\n          setSelectedFiles([zipFile]);\n          onFilesSelected([zipFile]);\n          setIsScanning(false);\n        });\n      } catch (e) {\n        console.error(\"Folder scan failed\", e);\n        setIsScanning(false);\n      }\n    } else {\n      // Standard File Drop\n      if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n        const newFiles = Array.from(e.dataTransfer.files);\n        setSelectedFiles(newFiles);\n        onFilesSelected(newFiles);\n      }\n    }\n  };\n\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const newFiles = Array.from(e.target.files);\n      setSelectedFiles(newFiles);\n      onFilesSelected(newFiles);\n    }\n  };\n\n  const removeFile = (index: number) => {\n    const newFiles = selectedFiles.filter((_, i) => i !== index);\n    setSelectedFiles(newFiles);\n    onFilesSelected(newFiles);\n  };\n\n  const totalSize = selectedFiles.reduce((acc, file) => acc + file.size, 0);\n\n  return (\n    <div className=\"w-full space-y-4\">\n      <div\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        className={`\n          relative group cursor-pointer\n          border-2 border-dashed rounded-xl p-10\n          transition-all duration-300 ease-in-out\n          flex flex-col items-center justify-center text-center\n          ${isDragging\n            ? \"border-primary bg-primary/5 shadow-[0_0_30px_rgba(34,197,94,0.1)]\"\n            : \"border-border hover:border-primary/50 hover:bg-secondary/30\"}\n          ${disabled ? \"opacity-50 cursor-not-allowed\" : \"\"}\n        `}\n      >\n        <input\n          type=\"file\"\n          multiple\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed\"\n          onChange={handleFileInput}\n          disabled={disabled}\n        />\n\n        <div className=\"w-16 h-16 mb-4 rounded-full bg-secondary flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\n          {isScanning ? (\n            <Loader2 className=\"w-8 h-8 text-primary animate-spin\" />\n          ) : isDragging ? (\n            <FolderArchive className=\"w-8 h-8 text-primary\" />\n          ) : (\n            <UploadCloud className=\"w-8 h-8 text-muted-foreground\" />\n          )}\n        </div>\n\n        <h3 className=\"text-lg font-semibold mb-1\">\n          {isDragging ? \"Drop folder or files\" : isScanning ? \"Zipping...\" : \"Drag & drop files or folders here\"}\n        </h3>\n        <p className=\"text-sm text-muted-foreground\">\n          or click to browse from your device\n        </p>\n        <p className=\"text-xs text-muted-foreground mt-4 font-mono\">\n          Max file size: 500 MB\n        </p>\n      </div>\n\n      <AnimatePresence>\n        {selectedFiles.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"space-y-3\"\n          >\n            {/* Header Row */}\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-xs uppercase tracking-wider font-mono text-muted-foreground\">\n                  Selected Files ({selectedFiles.length})\n                </span>\n\n                {/* Persistence Status Indicator */}\n                <AnimatePresence mode=\"wait\">\n                  {persistenceStatus === 'restored' && (\n                    <motion.div\n                      key=\"restored\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      className=\"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-blue-500/10 border border-blue-500/20\"\n                    >\n                      <HardDrive className=\"w-3 h-3 text-blue-400\" />\n                      <span className=\"text-[10px] font-mono text-blue-400\">Restored</span>\n                    </motion.div>\n                  )}\n                  {persistenceStatus === 'saving' && (\n                    <motion.div\n                      key=\"saving\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      className=\"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-amber-500/10 border border-amber-500/20\"\n                    >\n                      <Loader2 className=\"w-3 h-3 text-amber-400 animate-spin\" />\n                      <span className=\"text-[10px] font-mono text-amber-400\">Saving...</span>\n                    </motion.div>\n                  )}\n                  {persistenceStatus === 'saved' && (\n                    <motion.div\n                      key=\"saved\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      className=\"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20\"\n                    >\n                      <CheckCircle2 className=\"w-3 h-3 text-emerald-400\" />\n                      <span className=\"text-[10px] font-mono text-emerald-400\">Saved</span>\n                    </motion.div>\n                  )}\n                  {persistenceStatus === 'error' && (\n                    <motion.div\n                      key=\"error\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      className=\"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-red-500/10 border border-red-500/20\"\n                    >\n                      <CloudOff className=\"w-3 h-3 text-red-400\" />\n                      <span className=\"text-[10px] font-mono text-red-400\">Error</span>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-xs font-mono text-muted-foreground\">\n                  {(totalSize / (1024 * 1024)).toFixed(2)} MB\n                </span>\n                {!disabled && selectedFiles.length > 1 && (\n                  <button\n                    onClick={async () => {\n                      setSelectedFiles([]);\n                      onFilesSelected([]);\n                      await clearStoredFiles();\n                    }}\n                    className=\"text-[10px] font-mono uppercase tracking-wider text-red-400/70 hover:text-red-400 transition-colors\"\n                  >\n                    Clear All\n                  </button>\n                )}\n              </div>\n            </div>\n\n            {/* Info Banner for Restored Files */}\n            {persistenceStatus === 'restored' && (\n              <motion.div\n                initial={{ opacity: 0, y: -10 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -10 }}\n                className=\"flex items-center gap-2 p-2 rounded-lg bg-blue-500/5 border border-blue-500/10\"\n              >\n                <HardDrive className=\"w-4 h-4 text-blue-400 flex-shrink-0\" />\n                <p className=\"text-xs text-blue-300\">\n                  Files restored from your last session. Ready to encrypt!\n                </p>\n              </motion.div>\n            )}\n\n            {/* File List */}\n            {selectedFiles.map((file, idx) => (\n              <motion.div\n                key={`${file.name}-${idx}`}\n                initial={{ opacity: 0, x: -10 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: 10 }}\n                className=\"flex items-center justify-between p-3 bg-secondary/30 rounded-lg border border-border group\"\n              >\n                <div className=\"flex items-center gap-3 overflow-hidden\">\n                  <div className=\"p-2 bg-background rounded-md\">\n                    <FileIcon className=\"w-4 h-4 text-primary\" />\n                  </div>\n                  <div className=\"truncate\">\n                    <p className=\"text-sm font-medium truncate max-w-[200px]\">{file.name}</p>\n                    <p className=\"text-xs text-muted-foreground\">{(file.size / 1024).toFixed(1)} KB</p>\n                  </div>\n                </div>\n\n                {!disabled && (\n                  <button\n                    onClick={() => removeFile(idx)}\n                    className=\"p-2 hover:bg-destructive/10 hover:text-destructive rounded-full transition-colors\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </button>\n                )}\n              </motion.div>\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import { motion } from \"framer-motion\";\nimport { Key, FileText, Lock, Upload, CheckCircle, Loader2 } from \"lucide-react\";\n\ntype ProgressStep = \"keys\" | \"metadata\" | \"transfer\" | \"done\";\ntype UploadStage = \"idle\" | \"encrypting\" | \"uploading\" | \"success\" | \"resuming\";\n\ninterface EncryptionProgressProps {\n    stage: UploadStage;\n    step: ProgressStep;\n    progress: number;\n    statusText: string;\n}\n\nconst steps = [\n    { id: \"keys\", label: \"Generating Keys\", icon: Key },\n    { id: \"metadata\", label: \"Encrypting Metadata\", icon: FileText },\n    { id: \"transfer\", label: \"Encrypting & Uploading\", icon: Upload },\n    { id: \"done\", label: \"Complete\", icon: CheckCircle },\n];\n\nexport function EncryptionProgress({ stage, step, progress, statusText }: EncryptionProgressProps) {\n    const currentStepIndex = steps.findIndex((s) => s.id === step);\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            className=\"w-full max-w-md mx-auto text-center px-4\"\n        >\n            {/* Animated Lock Icon */}\n            <motion.div\n                animate={{\n                    rotate: stage === \"encrypting\" ? [0, 10, -10, 0] : 0,\n                    scale: stage === \"success\" ? [1, 1.2, 1] : 1\n                }}\n                transition={{\n                    duration: 0.5,\n                    repeat: stage === \"encrypting\" ? Infinity : 0,\n                    repeatDelay: 1\n                }}\n                className=\"w-16 h-16 md:w-20 md:h-20 mx-auto mb-6 relative\"\n            >\n                <div className={`w-full h-full rounded-2xl flex items-center justify-center ${stage === \"success\"\n                    ? 'bg-primary/20 border-2 border-primary'\n                    : 'bg-zinc-800 border border-zinc-700'\n                    }`}>\n                    {stage === \"success\" ? (\n                        <CheckCircle className=\"w-8 h-8 md:w-10 md:h-10 text-primary\" />\n                    ) : (\n                        <Lock className=\"w-8 h-8 md:w-10 md:h-10 text-primary animate-pulse\" />\n                    )}\n                </div>\n\n                {/* Orbiting particles */}\n                {stage !== \"success\" && (\n                    <>\n                        {[0, 1, 2].map((i) => (\n                            <motion.div\n                                key={i}\n                                className=\"absolute w-2 h-2 bg-primary rounded-full\"\n                                animate={{\n                                    x: [0, 40, 0, -40, 0],\n                                    y: [-40, 0, 40, 0, -40],\n                                    opacity: [0.3, 1, 0.3],\n                                }}\n                                transition={{\n                                    duration: 3,\n                                    repeat: Infinity,\n                                    delay: i * 1,\n                                    ease: \"easeInOut\",\n                                }}\n                                style={{ top: \"50%\", left: \"50%\", marginLeft: -4, marginTop: -4 }}\n                            />\n                        ))}\n                    </>\n                )}\n            </motion.div>\n\n            {/* Status Text */}\n            <motion.h3\n                key={statusText}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"text-lg md:text-xl font-bold mb-2 font-mono break-words line-clamp-2 min-h-[3.5rem] flex items-center justify-center\"\n            >\n                {statusText}\n            </motion.h3>\n\n            {/* Progress Bar */}\n            <div className=\"w-full h-2 bg-zinc-800 rounded-full overflow-hidden mb-6\">\n                <motion.div\n                    initial={{ width: 0 }}\n                    animate={{ width: `${progress}%` }}\n                    transition={{ duration: 0.3, ease: \"easeOut\" }}\n                    className=\"h-full bg-gradient-to-r from-primary via-emerald-400 to-primary rounded-full\"\n                    style={{\n                        backgroundSize: \"200% 100%\",\n                        animation: \"shimmer 2s linear infinite\",\n                    }}\n                />\n            </div>\n\n            {/* Progress Percentage */}\n            <div className=\"text-3xl md:text-4xl font-mono font-bold text-primary mb-8\">\n                {Math.round(progress)}%\n            </div>\n\n            {/* Step Indicators */}\n            <div className=\"space-y-2 text-left bg-zinc-900/50 p-4 rounded-xl\">\n                {steps.map((s, index) => {\n                    const isActive = s.id === step;\n                    const isCompleted = index < currentStepIndex;\n                    const isPending = index > currentStepIndex;\n                    const StepIcon = s.icon;\n\n                    return (\n                        <motion.div\n                            key={s.id}\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            transition={{ delay: index * 0.1 }}\n                            className={`progress-step ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''} ${isPending ? 'pending' : ''}`}\n                        >\n                            <div className={`w-6 h-6 rounded-full flex items-center justify-center shrink-0 ${isCompleted ? 'bg-primary/20' : isActive ? 'bg-primary/10' : 'bg-zinc-800'\n                                }`}>\n                                {isCompleted ? (\n                                    <CheckCircle className=\"w-4 h-4 text-primary\" />\n                                ) : isActive ? (\n                                    <Loader2 className=\"w-4 h-4 text-primary animate-spin\" />\n                                ) : (\n                                    <StepIcon className=\"w-3 h-3\" />\n                                )}\n                            </div>\n                            <span className=\"text-xs md:text-sm font-mono truncate\">{s.label}</span>\n                        </motion.div>\n                    );\n                })}\n            </div>\n\n            {/* Matrix-style decoration */}\n            <div className=\"mt-8 font-mono text-[10px] text-primary/30 overflow-hidden\">\n                <motion.div\n                    animate={{ y: [-20, 0] }}\n                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n                >\n                    {Array.from({ length: 3 }, (_, i) => (\n                        <div key={i} className=\"opacity-50\">\n                            {Array.from({ length: 40 }, () =>\n                                String.fromCharCode(33 + Math.floor(Math.random() * 94))\n                            ).join('')}\n                        </div>\n                    ))}\n                </motion.div>\n            </div>\n\n            <style>{`\n        @keyframes shimmer {\n          0% { background-position: 200% 0; }\n          100% { background-position: -200% 0; }\n        }\n      `}</style>\n        </motion.div>\n    );\n}\n","/**\n * Simplified Upload Configuration for VaultBridge\n * ================================================\n * \n * No chunking - files are uploaded as single encrypted blobs.\n * Lossless transfer with AES-256-GCM encryption.\n * \n * @version 2.0.0\n */\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\n/**\n * Maximum file size allowed (500MB)\n */\nexport const MAX_FILE_SIZE = 500 * 1024 * 1024;\n\n/**\n * Maximum total upload size (all files combined)\n */\nexport const MAX_TOTAL_SIZE = 500 * 1024 * 1024;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface UploadConfig {\n    /** Size of the file/folder in bytes */\n    size: number;\n    /** Whether the upload is valid (under limits) */\n    isValid: boolean;\n    /** Error message if invalid */\n    errorMessage?: string;\n    /** Formatted size string */\n    formattedSize: string;\n    /** Estimated upload time in seconds */\n    estimatedUploadTime: number;\n}\n\n// ============================================================================\n// MAIN FUNCTIONS\n// ============================================================================\n\n/**\n * Validate and get upload configuration for files\n * \n * @param files - Array of files to upload\n * @returns UploadConfig - Configuration and validation result\n */\nexport function getUploadConfig(files: File[]): UploadConfig {\n    const totalSize = files.reduce((acc, f) => acc + f.size, 0);\n    const largestFile = Math.max(...files.map(f => f.size));\n\n    // Check individual file size\n    if (largestFile > MAX_FILE_SIZE) {\n        const oversizedFile = files.find(f => f.size > MAX_FILE_SIZE);\n        return {\n            size: totalSize,\n            isValid: false,\n            errorMessage: `File \"${oversizedFile?.name}\" exceeds 500MB limit (${formatBytes(largestFile)})`,\n            formattedSize: formatBytes(totalSize),\n            estimatedUploadTime: 0\n        };\n    }\n\n    // Check total size\n    if (totalSize > MAX_TOTAL_SIZE) {\n        return {\n            size: totalSize,\n            isValid: false,\n            errorMessage: `Total upload size ${formatBytes(totalSize)} exceeds 500MB limit`,\n            formattedSize: formatBytes(totalSize),\n            estimatedUploadTime: 0\n        };\n    }\n\n    // Estimate upload time (assume ~10 Mbps average)\n    const estimatedTime = Math.ceil((totalSize * 8) / (10 * 1024 * 1024));\n\n    return {\n        size: totalSize,\n        isValid: true,\n        formattedSize: formatBytes(totalSize),\n        estimatedUploadTime: estimatedTime\n    };\n}\n\n/**\n * Validate a single file\n */\nexport function validateFile(file: File): { valid: boolean; error?: string } {\n    if (file.size > MAX_FILE_SIZE) {\n        return {\n            valid: false,\n            error: `File \"${file.name}\" exceeds 500MB limit (${formatBytes(file.size)})`\n        };\n    }\n    return { valid: true };\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Format bytes to human-readable string\n */\nexport function formatBytes(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n/**\n * Format seconds to human-readable duration\n */\nexport function formatDuration(seconds: number): string {\n    if (seconds < 60) {\n        return `${seconds} seconds`;\n    } else if (seconds < 3600) {\n        const mins = Math.floor(seconds / 60);\n        const secs = seconds % 60;\n        return secs > 0 ? `${mins}m ${secs}s` : `${mins} minutes`;\n    } else {\n        const hours = Math.floor(seconds / 3600);\n        const mins = Math.floor((seconds % 3600) / 60);\n        return mins > 0 ? `${hours}h ${mins}m` : `${hours} hours`;\n    }\n}\n","import { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n    Lock, Upload, ArrowLeft, Shield, Timer, Zap, AlertTriangle, X,\n    Paperclip, FileText, Image as ImageIcon, FileArchive, FileVideo, FileAudio,\n    File, ChevronRight, Check, Eye, ArrowRight, Flame, Clock, CheckCircle2,\n    Send, Trash2, HardDrive, UploadCloud, FolderArchive, Loader2\n} from \"lucide-react\";\nimport { FileDropzone } from \"@/components/file-dropzone\";\nimport { EncryptionProgress } from \"@/components/encryption-progress\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useSounds } from \"@/hooks/useSounds\";\nimport { useCreateVault, useGetChunkUploadUrl, useMarkChunkUploaded } from \"@/hooks/use-vaults\";\nimport { generateKey, exportKey, encryptMetadata, generateUUID, generateSplitCode, wrapFileKey, encryptData } from \"@/lib/crypto\";\nimport { getUploadConfig, formatBytes, MAX_FILE_SIZE } from \"@/lib/uploadConfig\";\nimport { clearStoredFiles, saveUploadSettings, loadUploadSettings } from \"@/lib/fileStorage\";\n\ntype UploadStage = \"idle\" | \"encrypting\" | \"uploading\" | \"success\";\ntype ProgressStep = \"keys\" | \"metadata\" | \"transfer\" | \"done\";\n\n// ─── Constants ───────────────────────────────────────────────────────────────\nconst STEPS = [\n    { id: 1, label: \"Select\", icon: Paperclip },\n    { id: 2, label: \"Configure\", icon: Eye },\n] as const;\n\n// ─── Helpers ─────────────────────────────────────────────────────────────────\nconst formatSize = (bytes: number) => {\n    if (bytes === 0) return \"0 B\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n};\n\nconst getFileIcon = (type: string) => {\n    if (type.startsWith(\"image/\")) return ImageIcon;\n    if (type.startsWith(\"video/\")) return FileVideo;\n    if (type.startsWith(\"audio/\")) return FileAudio;\n    if (type.includes(\"zip\") || type.includes(\"rar\") || type.includes(\"tar\") || type.includes(\"7z\") || type.includes(\"gz\"))\n        return FileArchive;\n    if (type.includes(\"pdf\") || type.includes(\"doc\") || type.includes(\"text\") || type.includes(\"sheet\"))\n        return FileText;\n    return File;\n};\n\nconst getFileColor = (type: string) => {\n    if (type.startsWith(\"image/\")) return \"text-sky-400 bg-sky-500/10 border-sky-500/20\";\n    if (type.startsWith(\"video/\")) return \"text-rose-400 bg-rose-500/10 border-rose-500/20\";\n    if (type.startsWith(\"audio/\")) return \"text-amber-400 bg-amber-500/10 border-amber-500/20\";\n    if (type.includes(\"zip\") || type.includes(\"rar\") || type.includes(\"tar\"))\n        return \"text-orange-400 bg-orange-500/10 border-orange-500/20\";\n    if (type.includes(\"pdf\")) return \"text-red-400 bg-red-500/10 border-red-500/20\";\n    return \"text-amber-400 bg-amber-500/10 border-amber-500/20\";\n};\n\nconst formatExpiry = (hours: number) => {\n    if (hours < 24) return `${hours}h`;\n    const days = Math.floor(hours / 24);\n    const remainingHours = hours % 24;\n    if (remainingHours === 0) return `${days}d`;\n    return `${days}d ${remainingHours}h`;\n};\n\nexport default function UploadPage() {\n    const [step, setStep] = useState(1);\n    const [files, setFiles] = useState<File[]>([]);\n    const [expiresIn, setExpiresIn] = useState([1]); // Default to 1 hour\n    const [maxDownloads, setMaxDownloads] = useState([5]); // Default to 5 downloads\n    const [stage, setStage] = useState<UploadStage>(\"idle\");\n    const [currentStep, setCurrentStep] = useState<ProgressStep>(\"keys\");\n    const [progress, setProgress] = useState(0);\n    const [statusText, setStatusText] = useState(\"\");\n    const [isDragActive, setIsDragActive] = useState(false);\n    const [uploadError, setUploadError] = useState<string | null>(null);\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n\n    const [, setLocation] = useLocation();\n    const { toast } = useToast();\n    const { play: playSound } = useSounds();\n    const abortControllerRef = useRef<AbortController | null>(null);\n\n    const createVault = useCreateVault();\n    const getChunkUrl = useGetChunkUploadUrl();\n    const markUploaded = useMarkChunkUploaded();\n\n    // Load persisted settings on mount\n    useEffect(() => {\n        const loadSettings = async () => {\n            const settings = await loadUploadSettings();\n            if (settings) {\n                setExpiresIn([settings.expiresIn]);\n                setMaxDownloads([settings.maxDownloads]);\n            }\n        };\n        loadSettings();\n    }, []);\n\n    // Save settings when they change\n    useEffect(() => {\n        saveUploadSettings(expiresIn[0], maxDownloads[0]);\n    }, [expiresIn, maxDownloads]);\n\n    const truncateName = (name: string, maxLength: number = 20) => {\n        if (name.length <= maxLength) return name;\n        const extIndex = name.lastIndexOf('.');\n        if (extIndex !== -1) {\n            const ext = name.substring(extIndex);\n            const base = name.substring(0, extIndex);\n            if (base.length > maxLength - ext.length - 3) {\n                return base.substring(0, maxLength - ext.length - 3) + '...' + ext;\n            }\n        }\n        return name.substring(0, maxLength - 3) + '...';\n    };\n\n    const handleFilesSelected = (newFiles: File[]) => {\n        setUploadError(null);\n\n        // Validate files\n        const config = getUploadConfig(newFiles);\n        if (!config.isValid) {\n            playSound('error');\n            setUploadError(config.errorMessage || \"Invalid files\");\n            toast({\n                variant: \"destructive\",\n                title: \"Upload Limit Exceeded\",\n                description: config.errorMessage,\n            });\n            return;\n        }\n\n        playSound('drop');\n        setFiles(newFiles);\n    };\n\n    const handleUpload = async () => {\n        setShowConfirmDialog(false);\n        if (files.length === 0) return;\n\n        // Final validation\n        const config = getUploadConfig(files);\n        if (!config.isValid) {\n            toast({\n                variant: \"destructive\",\n                title: \"Upload Error\",\n                description: config.errorMessage,\n            });\n            return;\n        }\n\n        setStage(\"encrypting\");\n        setProgress(0);\n        abortControllerRef.current = new AbortController();\n\n        try {\n            const startTime = Date.now();\n\n            // Step 1: Generate Keys\n            setCurrentStep(\"keys\");\n            setStatusText(\"Generating military-grade AES-256 keys...\");\n            await new Promise(r => setTimeout(r, 300));\n            const key = await generateKey();\n            setProgress(10);\n\n            // Step 2: Encrypt Metadata\n            setCurrentStep(\"metadata\");\n            setStatusText(\"Encrypting metadata...\");\n\n            const fileMetadata = files.map(f => ({\n                name: f.name,\n                type: f.type,\n                size: f.size,\n                fileId: generateUUID(),\n                lastModified: f.lastModified\n            }));\n\n            const encryptedMetadata = await encryptMetadata(fileMetadata, key);\n\n            // Prepare files payload - 1 chunk per file (no chunking)\n            const filesPayload = fileMetadata.map(fm => ({\n                fileId: fm.fileId,\n                chunks: 1,\n                size: fm.size,\n                isCompressed: false,\n                originalSize: fm.size\n            }));\n            setProgress(20);\n\n            // Step 3: Register Vault\n            const maxLookupRetries = 5;\n            let splitCode: ReturnType<typeof generateSplitCode> | null = null;\n            let wrappedKey = \"\";\n            let vault: Awaited<ReturnType<typeof createVault.mutateAsync>> | null = null;\n\n            for (let attempt = 0; attempt <= maxLookupRetries; attempt++) {\n                splitCode = generateSplitCode();\n                setStatusText(`Deriving PIN-protective wrapper (attempt ${attempt + 1})...`);\n                wrappedKey = await wrapFileKey(key, splitCode.pin);\n\n                try {\n                    setStatusText(\"Securing vault location...\");\n                    vault = await createVault.mutateAsync({\n                        expiresIn: expiresIn[0],\n                        maxDownloads: maxDownloads[0],\n                        encryptedMetadata,\n                        lookupId: splitCode.lookupId,\n                        wrappedKey,\n                        files: filesPayload\n                    });\n                    break;\n                } catch (err) {\n                    const typedError = err as Error & { status?: number; code?: string };\n                    const isLookupCollision =\n                        typedError.status === 409 || typedError.code === \"LOOKUP_ID_CONFLICT\";\n                    if (!isLookupCollision || attempt === maxLookupRetries) {\n                        throw err;\n                    }\n                }\n            }\n\n            if (!vault || !splitCode) {\n                throw new Error(\"Could not allocate a unique access code. Please retry.\");\n            }\n\n            setProgress(30);\n\n            // Step 4: Encrypt & Upload Each File (No Chunking - Single Blob)\n            setStage(\"uploading\");\n            setCurrentStep(\"transfer\");\n\n            const totalFiles = files.length;\n\n            for (let i = 0; i < files.length; i++) {\n                // Check abort\n                if (abortControllerRef.current.signal.aborted) {\n                    throw new Error(\"Upload cancelled\");\n                }\n\n                const file = files[i];\n                const fileId = filesPayload[i].fileId;\n                const displayName = truncateName(file.name);\n\n                // Read entire file\n                setStatusText(`Reading ${displayName}...`);\n                const fileBuffer = await file.arrayBuffer();\n\n                // Encrypt entire file\n                setStatusText(`Encrypting ${displayName}...`);\n                const { iv, encryptedData } = await encryptData(fileBuffer, key);\n\n                // Combine IV + encrypted data\n                const combined = new Uint8Array(iv.byteLength + encryptedData.byteLength);\n                combined.set(iv, 0);\n                combined.set(new Uint8Array(encryptedData), iv.byteLength);\n\n                // Get upload URL\n                setStatusText(`Uploading ${displayName}...`);\n                const { uploadUrl, storagePath } = await getChunkUrl.mutateAsync({\n                    vaultId: vault.id,\n                    fileId,\n                    chunkIndex: 0,\n                    size: combined.byteLength\n                });\n\n                // Upload to Supabase\n                const response = await fetch(uploadUrl, {\n                    method: 'PUT',\n                    body: combined,\n                    signal: abortControllerRef.current.signal\n                });\n\n                if (!response.ok) {\n                    throw new Error(`Upload failed for ${file.name}: ${response.statusText}`);\n                }\n\n                // Mark as uploaded\n                await markUploaded.mutateAsync({\n                    vaultId: vault.id,\n                    fileId,\n                    chunkIndex: 0,\n                    storagePath\n                });\n\n                // Update progress\n                const perc = 30 + ((i + 1) / totalFiles) * 65;\n                setProgress(perc);\n            }\n\n            setCurrentStep(\"done\");\n            setProgress(100);\n            setStatusText(\"Finalizing secure vault...\");\n            setStage(\"success\");\n            playSound('success');\n\n            // Clear persisted files after successful upload\n            await clearStoredFiles();\n\n            // Stats Calculation\n            const endTime = Date.now();\n            const duration = endTime - startTime; // ms\n            const speed = totalSize / (duration / 1000); // Bytes/sec\n\n            setTimeout(() => {\n                setLocation(`/success/${vault.id}#code=${splitCode.fullCode}&time=${duration}&speed=${Math.floor(speed)}`);\n            }, 800);\n\n        } catch (err) {\n            console.error(err);\n            playSound('error');\n            setStage(\"idle\");\n            if (err instanceof Error && err.message === \"Upload cancelled\") {\n                toast({ title: \"Upload Cancelled\", variant: \"default\" });\n            } else {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Upload Failed\",\n                    description: err instanceof Error ? err.message : \"An error occurred\",\n                });\n            }\n        }\n    };\n\n    // Calculate total size for display\n    const totalSize = files.reduce((acc, f) => acc + f.size, 0);\n    const sizePercentage = Math.min((totalSize / (500 * 1024 * 1024)) * 100, 100);\n\n    const canProceed = step === 1 ? files.length > 0 && !uploadError : true;\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden flex flex-col font-sans text-zinc-100 bg-zinc-950\">\n            {/* Background Effects */}\n            <div className=\"fixed inset-0 grid-bg opacity-30\" />\n            <div className=\"fixed top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] bg-amber-500/5 rounded-full blur-[120px] pointer-events-none\" />\n\n            {/* Header */}\n            <header className=\"relative z-10 px-4 sm:px-6 py-4 sm:py-6 border-b border-white/5 safe-top\">\n                <div className=\"max-w-5xl mx-auto flex items-center justify-between\">\n                    <Link href=\"/\">\n                        <motion.div\n                            initial={{ opacity: 0, x: -20 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            className=\"flex items-center gap-2 cursor-pointer group shrink-0\"\n                        >\n                            <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-amber-500/10 rounded-xl flex items-center justify-center border border-amber-500/20 group-hover:border-amber-500/50 transition-colors\">\n                                <Lock className=\"w-4 h-4 sm:w-5 sm:h-5 text-amber-500\" />\n                            </div>\n                            <h1 className=\"text-lg sm:text-xl font-bold font-mono tracking-tight group-hover:text-amber-500 transition-colors\">\n                                VAULT<span className=\"text-amber-500\">BRIDGE</span>\n                            </h1>\n                        </motion.div>\n                    </Link>\n\n                    <Link href=\"/\">\n                        <Button variant=\"ghost\" size=\"sm\" className=\"gap-1.5 sm:gap-2 text-zinc-400 hover:text-white hover:bg-white/5 px-2 sm:px-3 text-xs sm:text-sm\">\n                            <ArrowLeft className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n                            <span className=\"hidden sm:inline\">Back</span>\n                        </Button>\n                    </Link>\n                </div>\n            </header>\n\n            {/* Main Content */}\n            <main className=\"relative z-10 flex-1 w-full max-w-2xl mx-auto px-3 sm:px-6 py-6 sm:py-12 safe-bottom\">\n\n                {/* Title Area */}\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"text-center mb-6 sm:mb-8\"\n                >\n                    <div className=\"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1 sm:py-1.5 rounded-full bg-amber-500/8 border border-amber-500/15 text-amber-400 text-[10px] sm:text-xs font-mono tracking-widest uppercase mb-3 sm:mb-4\">\n                        <Shield className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n                        End-to-End Encrypted Vault\n                    </div>\n                    <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-3 bg-gradient-to-r from-amber-200 via-amber-100 to-amber-200 bg-clip-text text-transparent\">\n                        Secure Upload\n                    </h2>\n                    <p className=\"text-zinc-400 text-xs sm:text-sm max-w-md mx-auto px-2\">\n                        Select files, configure vault settings, then encrypt & upload — all client-side, zero-knowledge.\n                    </p>\n                </motion.div>\n\n                {/* Step Indicators */}\n                <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.1 }}\n                    className=\"flex items-center justify-center gap-1.5 sm:gap-3 mb-6 sm:mb-8\"\n                >\n                    {STEPS.map((s, i) => {\n                        const isCompleted = step > s.id;\n                        const isCurrent = step === s.id;\n                        const StepIcon = s.icon;\n\n                        return (\n                            <div key={s.id} className=\"flex items-center gap-1.5 sm:gap-3\">\n                                <button\n                                    onClick={() => {\n                                        if (isCompleted) setStep(s.id);\n                                    }}\n                                    disabled={!isCompleted && !isCurrent}\n                                    className={`flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-[10px] sm:text-xs font-semibold tracking-wider uppercase transition-all duration-300 ${isCompleted\n                                        ? \"bg-emerald-500/15 text-emerald-400 border border-emerald-500/30 cursor-pointer hover:bg-emerald-500/20\"\n                                        : isCurrent\n                                            ? \"bg-amber-500/15 text-amber-300 border border-amber-500/30\"\n                                            : \"bg-zinc-800/50 text-zinc-500 border border-zinc-700/50 cursor-not-allowed\"\n                                        }`}\n                                >\n                                    {isCompleted ? <Check className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" /> : <StepIcon className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />}\n                                    <span className=\"hidden sm:inline\">{s.label}</span>\n                                </button>\n                                {i < STEPS.length - 1 && (\n                                    <ChevronRight className={`w-3 h-3 sm:w-4 sm:h-4 ${step > s.id ? \"text-emerald-500/50\" : \"text-zinc-700\"}`} />\n                                )}\n                            </div>\n                        );\n                    })}\n                </motion.div>\n\n                {/* Upload Card */}\n                <motion.div\n                    initial={{ opacity: 0, y: 30 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.15 }}\n                    className={`bg-zinc-900/50 border border-white/10 rounded-3xl relative overflow-hidden backdrop-blur-xl ${isDragActive ? 'ring-2 ring-amber-500 bg-amber-500/5' : ''}`}\n                >\n                    {/* Progress Overlay */}\n                    <AnimatePresence>\n                        {stage !== \"idle\" && (\n                            <motion.div\n                                initial={{ opacity: 0 }}\n                                animate={{ opacity: 1 }}\n                                exit={{ opacity: 0 }}\n                                className=\"absolute inset-0 bg-zinc-950/95 z-20 flex flex-col items-center justify-center p-8 text-center\"\n                            >\n                                <EncryptionProgress\n                                    stage={stage}\n                                    step={currentStep}\n                                    progress={progress}\n                                    statusText={statusText}\n                                />\n                                {stage === 'uploading' && (\n                                    <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => abortControllerRef.current?.abort()}\n                                        className=\"mt-8 border-red-500/20 text-red-400 hover:bg-red-500/10\"\n                                    >\n                                        Cancel Upload\n                                    </Button>\n                                )}\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n\n                    <AnimatePresence mode=\"wait\">\n                        {/* ─── STEP 1: SELECT FILES ─── */}\n                        {step === 1 && (\n                            <motion.div\n                                key=\"step-1\"\n                                initial={{ opacity: 0, x: -30 }}\n                                animate={{ opacity: 1, x: 0 }}\n                                exit={{ opacity: 0, x: -30 }}\n                                transition={{ duration: 0.25 }}\n                                className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\"\n                            >\n                                <FileDropzone\n                                    onFilesSelected={handleFilesSelected}\n                                    disabled={stage !== \"idle\"}\n                                    onDragStateChange={setIsDragActive}\n                                />\n\n                                {/* Error Display */}\n                                {uploadError && (\n                                    <motion.div\n                                        initial={{ opacity: 0, y: -10 }}\n                                        animate={{ opacity: 1, y: 0 }}\n                                        className=\"p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-3\"\n                                    >\n                                        <AlertTriangle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n                                        <div>\n                                            <p className=\"text-sm text-red-400\">{uploadError}</p>\n                                            <p className=\"text-xs text-zinc-500 mt-1\">Maximum file size: 500 MB</p>\n                                        </div>\n                                    </motion.div>\n                                )}\n\n                                {/* Size Progress Bar */}\n                                {files.length > 0 && (\n                                    <motion.div\n                                        initial={{ opacity: 0, y: 5 }}\n                                        animate={{ opacity: 1, y: 0 }}\n                                        className=\"space-y-2\"\n                                    >\n                                        <div className=\"flex justify-between items-center text-xs\">\n                                            <span className=\"text-zinc-400\">\n                                                {files.length} file{files.length > 1 ? 's' : ''} selected\n                                            </span>\n                                            <span className=\"font-mono text-amber-400\">{formatSize(totalSize)} / 500 MB</span>\n                                        </div>\n                                        <div className=\"h-1.5 bg-zinc-800 rounded-full overflow-hidden\">\n                                            <motion.div\n                                                initial={{ width: 0 }}\n                                                animate={{ width: `${sizePercentage}%` }}\n                                                className={`h-full rounded-full transition-colors ${sizePercentage > 90 ? 'bg-red-500' : sizePercentage > 70 ? 'bg-amber-500' : 'bg-amber-500/70'}`}\n                                            />\n                                        </div>\n                                    </motion.div>\n                                )}\n\n                                {/* Security Badges */}\n                                <div className=\"flex flex-wrap gap-2 justify-center pt-2\">\n                                    <div className=\"px-3 py-1.5 rounded-full bg-zinc-800/70 border border-zinc-700/50 text-[10px] font-mono uppercase tracking-wider text-zinc-400 flex items-center gap-1.5\">\n                                        <Shield className=\"w-3 h-3 text-emerald-500\" />\n                                        AES-256-GCM\n                                    </div>\n                                    <div className=\"px-3 py-1.5 rounded-full bg-zinc-800/70 border border-zinc-700/50 text-[10px] font-mono uppercase tracking-wider text-zinc-400 flex items-center gap-1.5\">\n                                        <Lock className=\"w-3 h-3 text-amber-500\" />\n                                        Lossless Transfer\n                                    </div>\n                                    <div className=\"px-3 py-1.5 rounded-full bg-zinc-800/70 border border-zinc-700/50 text-[10px] font-mono uppercase tracking-wider text-zinc-400 flex items-center gap-1.5\">\n                                        <Zap className=\"w-3 h-3 text-blue-500\" />\n                                        Max 500MB\n                                    </div>\n                                </div>\n                            </motion.div>\n                        )}\n\n                        {/* ─── STEP 2: CONFIGURE & REVIEW ─── */}\n                        {step === 2 && (\n                            <motion.div\n                                key=\"step-2\"\n                                initial={{ opacity: 0, x: 30 }}\n                                animate={{ opacity: 1, x: 0 }}\n                                exit={{ opacity: 0, x: 30 }}\n                                transition={{ duration: 0.25 }}\n                                className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\"\n                            >\n                                {/* Files Summary Card */}\n                                <div className=\"bg-zinc-800/30 border border-zinc-700/30 rounded-2xl p-4 sm:p-5 space-y-2 sm:space-y-3\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <Paperclip className=\"w-4 h-4 text-amber-400\" />\n                                            <span className=\"text-sm font-semibold text-zinc-200\">Attachments</span>\n                                        </div>\n                                        <span className=\"text-xs font-mono text-zinc-500\">{formatSize(totalSize)}</span>\n                                    </div>\n                                    <div className=\"space-y-1.5 max-h-32 overflow-y-auto\">\n                                        {files.map((file, i) => {\n                                            const Icon = getFileIcon(file.type);\n                                            const colorClasses = getFileColor(file.type);\n                                            return (\n                                                <div key={i} className=\"flex items-center gap-3 py-1.5\">\n                                                    <div className={`w-7 h-7 rounded-lg border flex items-center justify-center flex-shrink-0 ${colorClasses}`}>\n                                                        <Icon className=\"w-3.5 h-3.5\" />\n                                                    </div>\n                                                    <span className=\"text-sm text-zinc-300 truncate flex-1\">{file.name}</span>\n                                                    <span className=\"text-xs font-mono text-zinc-500 flex-shrink-0\">{formatSize(file.size)}</span>\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n\n                                {/* Settings Grid */}\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6\">\n                                    {/* Expiry Slider */}\n                                    <div className=\"bg-zinc-800/30 border border-zinc-700/30 rounded-2xl p-4 sm:p-5 space-y-3 sm:space-y-4\">\n                                        <div className=\"flex justify-between items-center\">\n                                            <label className=\"text-sm font-medium text-zinc-300 flex items-center gap-2\">\n                                                <Clock className=\"w-4 h-4 text-amber-400\" />\n                                                Auto-Destruct\n                                            </label>\n                                            <span className=\"text-sm font-mono text-amber-400 font-bold bg-amber-500/10 px-2.5 py-0.5 rounded-lg\">\n                                                {formatExpiry(expiresIn[0])}\n                                            </span>\n                                        </div>\n                                        <Slider\n                                            value={expiresIn}\n                                            onValueChange={setExpiresIn}\n                                            min={1}\n                                            max={168}\n                                            step={1}\n                                            className=\"py-2\"\n                                        />\n                                        <p className=\"text-[10px] text-zinc-600 leading-relaxed\">\n                                            Vault & all encrypted files will be permanently erased after this time.\n                                        </p>\n                                    </div>\n\n                                    {/* Download Limit */}\n                                    <div className=\"bg-zinc-800/30 border border-zinc-700/30 rounded-2xl p-4 sm:p-5 space-y-3 sm:space-y-4\">\n                                        <div className=\"flex justify-between items-center\">\n                                            <label className=\"text-sm font-medium text-zinc-300 flex items-center gap-2\">\n                                                <Zap className=\"w-4 h-4 text-emerald-400\" />\n                                                Download Limit\n                                            </label>\n                                            <span className={`text-sm font-mono font-bold px-2.5 py-0.5 rounded-lg ${maxDownloads[0] === 1\n                                                ? \"text-red-400 bg-red-500/10\"\n                                                : \"text-emerald-400 bg-emerald-500/10\"\n                                                }`}>\n                                                {maxDownloads[0] === 1 ? \"BURN\" : `${maxDownloads[0]}×`}\n                                            </span>\n                                        </div>\n                                        <Slider\n                                            value={maxDownloads}\n                                            onValueChange={setMaxDownloads}\n                                            min={1}\n                                            max={100}\n                                            step={1}\n                                            disabled={maxDownloads[0] === 1}\n                                            className={maxDownloads[0] === 1 ? \"opacity-30\" : \"\"}\n                                        />\n                                        <button\n                                            onClick={() => setMaxDownloads(maxDownloads[0] === 1 ? [5] : [1])}\n                                            className={`w-full text-xs cursor-pointer select-none transition-all py-2.5 rounded-xl border flex items-center justify-center gap-2 ${maxDownloads[0] === 1\n                                                ? \"bg-red-500/10 border-red-500/25 text-red-400\"\n                                                : \"bg-zinc-800/50 border-zinc-700/50 text-zinc-500 hover:text-zinc-300 hover:border-zinc-600\"\n                                                }`}\n                                        >\n                                            <Flame className={`w-3.5 h-3.5 ${maxDownloads[0] === 1 ? \"text-red-400\" : \"\"}`} />\n                                            {maxDownloads[0] === 1 ? \"Burn-on-Read Active (1 view)\" : \"Enable Burn-on-Read\"}\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {/* Zero-Knowledge Note */}\n                                <div className=\"bg-amber-500/5 border border-amber-500/10 rounded-2xl p-3 sm:p-4 flex items-start gap-3\">\n                                    <div className=\"w-9 h-9 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center flex-shrink-0\">\n                                        <Shield className=\"w-4.5 h-4.5 text-amber-400\" />\n                                    </div>\n                                    <div>\n                                        <p className=\"text-sm font-medium text-amber-300\">Zero-Knowledge Encryption</p>\n                                        <p className=\"text-xs text-zinc-500 mt-0.5 leading-relaxed\">\n                                            Encryption happens entirely in your browser. We never see your files, keys, or data.\n                                        </p>\n                                    </div>\n                                </div>\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </motion.div>\n\n                {/* Navigation Buttons */}\n                <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.2 }}\n                    className=\"mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3\"\n                >\n                    {step > 1 && (\n                        <Button\n                            onClick={() => setStep(step - 1)}\n                            variant=\"outline\"\n                            className=\"flex-1 h-12 sm:h-14 text-sm sm:text-base border-zinc-700 text-zinc-300 hover:bg-zinc-800/50 rounded-xl\"\n                        >\n                            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                            Back\n                        </Button>\n                    )}\n\n                    {step === 1 && (\n                        <Button\n                            onClick={() => setStep(2)}\n                            disabled={!canProceed}\n                            className=\"flex-1 h-12 sm:h-14 text-sm sm:text-base font-bold bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white rounded-xl shadow-lg shadow-amber-900/20 transition-all hover:scale-[1.01] active:scale-[0.99] disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100 w-full\"\n                        >\n                            Continue\n                            <ArrowRight className=\"w-4 h-4 ml-2\" />\n                        </Button>\n                    )}\n\n                    {step === 2 && (\n                        <Button\n                            onClick={() => setShowConfirmDialog(true)}\n                            disabled={files.length === 0 || stage !== \"idle\" || !!uploadError}\n                            className=\"flex-1 h-12 sm:h-14 text-sm sm:text-base font-bold bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white rounded-xl shadow-lg shadow-amber-900/20 transition-all hover:scale-[1.01] active:scale-[0.99] disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100 w-full\"\n                        >\n                            <Lock className=\"w-4 h-4 mr-2\" />\n                            Encrypt & Upload\n                        </Button>\n                    )}\n                </motion.div>\n\n                {/* Footer Note */}\n                <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    transition={{ delay: 0.3 }}\n                    className=\"mt-6 text-center\"\n                >\n                    <p className=\"text-[10px] md:text-xs text-center text-muted-foreground opacity-70\">\n                        By continuing, you agree to our <Link href=\"/terms\" className=\"underline hover:text-primary transition-colors\">Terms of Service</Link>, <Link href=\"/privacy\" className=\"underline hover:text-primary transition-colors\">Privacy Policy</Link> & <a href=\"/sitemap.xml\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline hover:text-primary transition-colors\">Sitemap</a>.\n                    </p>\n                </motion.div>\n            </main>\n\n            {/* ─── Confirmation Dialog ─── */}\n            <Dialog open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\n                <DialogContent className=\"sm:max-w-md bg-zinc-950 border border-zinc-800/80 text-zinc-100 shadow-2xl p-0 overflow-hidden rounded-2xl\">\n                    {/* Header */}\n                    <div className=\"relative h-20 bg-gradient-to-r from-amber-950/60 via-orange-950/40 to-amber-950/60 flex items-center justify-center overflow-hidden\">\n                        <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(245,158,11,0.12),transparent)]\" />\n                        <motion.div\n                            initial={{ scale: 0, rotate: -20 }}\n                            animate={{ scale: 1, rotate: 0 }}\n                            transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n                            className=\"w-12 h-12 bg-amber-500/15 rounded-xl border border-amber-500/25 flex items-center justify-center relative z-10\"\n                        >\n                            <Lock className=\"w-6 h-6 text-amber-400\" />\n                        </motion.div>\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"px-6 pb-6 pt-4\">\n                        <DialogHeader className=\"mb-4\">\n                            <DialogTitle className=\"text-lg font-bold text-center\">Confirm Encryption</DialogTitle>\n                            <DialogDescription className=\"text-center text-zinc-500 text-sm\">\n                                Review your vault configuration before encrypting\n                            </DialogDescription>\n                        </DialogHeader>\n\n                        {/* Summary */}\n                        <div className=\"space-y-3 mb-5\">\n                            {/* Files */}\n                            <div className=\"bg-zinc-900/60 border border-zinc-800/50 rounded-xl p-4\">\n                                <div className=\"flex items-center gap-2 mb-2.5\">\n                                    <Paperclip className=\"w-3.5 h-3.5 text-amber-400\" />\n                                    <span className=\"text-xs font-semibold text-zinc-300\">{files.length} file{files.length > 1 ? 's' : ''}</span>\n                                    <span className=\"text-xs font-mono text-zinc-600 ml-auto\">{formatSize(totalSize)}</span>\n                                </div>\n                                <div className=\"space-y-1.5 max-h-24 overflow-y-auto\">\n                                    {files.map((file, i) => {\n                                        const Icon = getFileIcon(file.type);\n                                        const colorClasses = getFileColor(file.type);\n                                        return (\n                                            <div key={i} className=\"flex items-center gap-2.5\">\n                                                <div className={`w-6 h-6 rounded-md border flex items-center justify-center ${colorClasses}`}>\n                                                    <Icon className=\"w-3 h-3\" />\n                                                </div>\n                                                <span className=\"text-xs text-zinc-400 truncate flex-1\">{file.name}</span>\n                                                <span className=\"text-[10px] font-mono text-zinc-600\">{formatSize(file.size)}</span>\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n\n                            {/* Settings Summary */}\n                            <div className=\"bg-zinc-900/60 border border-zinc-800/50 rounded-xl p-4\">\n                                <div className=\"flex items-center gap-2 mb-2.5\">\n                                    <Shield className=\"w-3.5 h-3.5 text-emerald-400\" />\n                                    <span className=\"text-xs font-semibold text-zinc-300\">Vault Settings</span>\n                                </div>\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Clock className=\"w-3 h-3 text-amber-400\" />\n                                        <span className=\"text-xs text-zinc-400\">Expires:</span>\n                                        <span className=\"text-xs font-mono text-amber-400\">{formatExpiry(expiresIn[0])}</span>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                        <Zap className=\"w-3 h-3 text-emerald-400\" />\n                                        <span className=\"text-xs text-zinc-400\">Limit:</span>\n                                        <span className={`text-xs font-mono ${maxDownloads[0] === 1 ? \"text-red-400\" : \"text-emerald-400\"}`}>\n                                            {maxDownloads[0] === 1 ? \"Burn-on-Read\" : `${maxDownloads[0]}× downloads`}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Action Buttons */}\n                        <div className=\"flex gap-3\">\n                            <Button\n                                variant=\"outline\"\n                                onClick={() => setShowConfirmDialog(false)}\n                                className=\"flex-1 h-12 border-zinc-700 text-zinc-300 hover:bg-zinc-800/50 rounded-xl\"\n                            >\n                                Go Back\n                            </Button>\n                            <Button\n                                onClick={handleUpload}\n                                className=\"flex-1 h-12 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white font-bold rounded-xl shadow-lg shadow-amber-900/20\"\n                            >\n                                <Lock className=\"w-4 h-4 mr-2\" />\n                                Encrypt Now\n                            </Button>\n                        </div>\n                    </div>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"],"names":["CircleCheckBig","createLucideIcon","CloudOff","CloudUpload","FolderArchive","DB_NAME","DB_VERSION","STORE_NAME","SETTINGS_STORE","openDB","resolve","reject","request","event","db","generateFileId","file","saveFilesToStorage","files","clearStoredFiles","fileDataPromises","fileData","tx","store","buffer","storedFile","error","loadFilesFromStorage","storedFiles","sf","oneDayAgo","validFiles","validFileObjs","saveUploadSettings","expiresIn","maxDownloads","settings","loadUploadSettings","FileDropzone","onFilesSelected","disabled","onDragStateChange","isDragging","setIsDragging","useState","selectedFiles","setSelectedFiles","persistenceStatus","setPersistenceStatus","isInitialMount","useRef","saveTimeoutRef","useEffect","handleDragOver","e","handleDragLeave","isScanning","setIsScanning","scanEntry","entry","reader","entries","promises","combined","acc","curr","handleDrop","items","hasDirectory","i","allFiles","result","zipData","fullPath","zipPath","zip","err","data","zipFile","newFiles","handleFileInput","removeFile","index","_","totalSize","jsxs","jsx","Loader2","UploadCloud","AnimatePresence","motion","HardDrive","CheckCircle2","idx","FileIcon","X","steps","Key","FileText","Upload","CheckCircle","EncryptionProgress","stage","step","progress","statusText","currentStepIndex","s","Lock","Fragment","isActive","isCompleted","isPending","StepIcon","MAX_FILE_SIZE","MAX_TOTAL_SIZE","getUploadConfig","f","largestFile","oversizedFile","formatBytes","estimatedTime","bytes","k","sizes","STEPS","Paperclip","Eye","formatSize","getFileIcon","type","ImageIcon","FileVideo","FileAudio","FileArchive","File","getFileColor","formatExpiry","hours","days","remainingHours","UploadPage","setStep","setFiles","setExpiresIn","setMaxDownloads","setStage","currentStep","setCurrentStep","setProgress","setStatusText","isDragActive","setIsDragActive","uploadError","setUploadError","showConfirmDialog","setShowConfirmDialog","setLocation","useLocation","toast","useToast","playSound","useSounds","abortControllerRef","createVault","useCreateVault","getChunkUrl","useGetChunkUploadUrl","markUploaded","useMarkChunkUploaded","truncateName","name","maxLength","extIndex","ext","base","handleFilesSelected","config","handleUpload","startTime","r","key","generateKey","fileMetadata","generateUUID","encryptedMetadata","encryptMetadata","filesPayload","fm","maxLookupRetries","splitCode","wrappedKey","vault","attempt","generateSplitCode","wrapFileKey","typedError","totalFiles","fileId","displayName","fileBuffer","iv","encryptedData","encryptData","uploadUrl","storagePath","response","perc","duration","speed","sizePercentage","canProceed","Link","Button","ArrowLeft","Shield","isCurrent","Check","ChevronRight","AlertTriangle","Zap","Icon","colorClasses","Clock","Slider","Flame","ArrowRight","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}