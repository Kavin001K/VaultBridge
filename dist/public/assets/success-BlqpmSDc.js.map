{"version":3,"file":"success-BlqpmSDc.js","sources":["../../../client/src/pages/success.tsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  ArrowLeft, Sparkles, AlertTriangle, Copy, Check, Key,\n  Share2, Mail, Trash2, Smartphone, Monitor, Shield, ExternalLink, Loader2,\n  Clock, Download, HardDrive, Timer, Zap\n} from \"lucide-react\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useGetVault } from \"@/hooks/use-vaults\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVaultHistory } from \"@/hooks/useVaultHistory\";\n\n// SVG Filter for Heat Distortion\nconst BurnFilter = () => (\n  <svg style={{ position: 'absolute', width: 0, height: 0 }}>\n    <defs>\n      <filter id=\"heat-wave\">\n        <feTurbulence\n          type=\"fractalNoise\"\n          baseFrequency=\"0.01\"\n          numOctaves=\"3\"\n          result=\"noise\"\n        >\n          <animate\n            attributeName=\"baseFrequency\"\n            dur=\"2s\"\n            values=\"0.01;0.05;0.2\"\n            repeatCount=\"1\"\n          />\n        </feTurbulence>\n        <feDisplacementMap\n          in=\"SourceGraphic\"\n          in2=\"noise\"\n          scale=\"20\"\n        />\n      </filter>\n    </defs>\n  </svg>\n);\n\nfunction CountdownTimer({ expiresAt }: { expiresAt: string }) {\n  const [timeLeft, setTimeLeft] = useState<{ h: number, m: number, s: number } | null>(null);\n\n  useEffect(() => {\n    const update = () => {\n      const now = new Date().getTime();\n      const end = new Date(expiresAt).getTime();\n      const diff = end - now;\n\n      if (diff <= 0) {\n        setTimeLeft(null);\n        return;\n      }\n      setTimeLeft({\n        h: Math.floor(diff / (1000 * 60 * 60)),\n        m: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),\n        s: Math.floor((diff % (1000 * 60)) / 1000)\n      });\n    };\n    update();\n    const interval = setInterval(update, 1000);\n    return () => clearInterval(interval);\n  }, [expiresAt]);\n\n  if (!timeLeft) return <span className=\"text-zinc-500 font-mono\">Expired</span>;\n\n  return (\n    <div className=\"flex items-center gap-2 font-mono text-sm md:text-base font-bold text-primary\">\n      <span className=\"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center\">{timeLeft.h.toString().padStart(2, '0')}</span>\n      <span className=\"text-zinc-500\">:</span>\n      <span className=\"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center\">{timeLeft.m.toString().padStart(2, '0')}</span>\n      <span className=\"text-zinc-500\">:</span>\n      <span className=\"bg-zinc-900 border border-zinc-700 px-2 py-1 rounded min-w-[2.5ch] text-center\">{timeLeft.s.toString().padStart(2, '0')}</span>\n    </div>\n  );\n}\n\nexport default function Success() {\n  const [, setLocation] = useLocation();\n  const [, params] = useRoute(\"/success/:id\");\n  const [splitCode, setSplitCode] = useState(\"\");\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState<'link' | 'email' | 'burn'>('link');\n  const [email, setEmail] = useState(\"\");\n  const [isSending, setIsSending] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isBurned, setIsBurned] = useState(false);\n  const [copiedLink, setCopiedLink] = useState(false);\n  const [copiedCode, setCopiedCode] = useState(false);\n  const [uploadStats, setUploadStats] = useState<{ time: number, speed: number } | null>(null);\n  const [showSpamAlert, setShowSpamAlert] = useState(false);\n  const { addRecord, updateRecord } = useVaultHistory();\n  const historySavedRef = useRef(false);\n\n  const handleBurn = async () => {\n    if (!params?.id) return;\n\n    setIsDeleting(true);\n    try {\n      const res = await fetch(`/api/vaults/${params.id}`, { method: 'DELETE' });\n      const data = await res.json();\n\n      if (!res.ok) throw new Error(data.message || \"Failed to delete\");\n\n      toast({\n        title: \"Initiating Self-Destruct\",\n        description: \"Protocol activated. Vaporizing data...\",\n        className: \"bg-rose-950/50 border-rose-500 text-rose-400 font-mono\",\n      });\n\n      // Mark as burned in vault history\n      if (splitCode) {\n        updateRecord(splitCode, \"sent\", { status: \"burned\" });\n      }\n\n      // Trigger Animation\n      setIsBurned(true);\n\n      // Redirect after animation\n      setTimeout(() => setLocation(\"/\"), 2500);\n\n    } catch (error) {\n      toast({\n        title: \"Deletion Failed\",\n        description: \"Could not destroy the vault. It may have already been deleted.\",\n        variant: \"destructive\"\n      });\n      setIsDeleting(false);\n    }\n  };\n\n  const vaultId = params?.id || \"\";\n  const { data: vault } = useGetVault(vaultId);\n\n  useEffect(() => {\n    const hash = window.location.hash;\n    const codeMatch = hash.match(/#code=(\\d{6})/);\n    if (codeMatch) {\n      setSplitCode(codeMatch[1]);\n    }\n\n    // Parse Stats\n    const params = new URLSearchParams(hash.replace(\"#\", \"?\")); // Hacky but works for hash params styled as queries\n    const time = params.get(\"time\");\n    const speed = params.get(\"speed\");\n\n    if (time && speed) {\n      setUploadStats({\n        time: parseInt(time),\n        speed: parseInt(speed)\n      });\n    }\n  }, []);\n\n  // Save vault to browser history when vault data is loaded\n  useEffect(() => {\n    if (vault && splitCode && !historySavedRef.current) {\n      historySavedRef.current = true;\n\n      const fileNames = vault.files?.map((f: any) => f.originalName || f.fileName || `File ${f.fileId?.slice(0, 6)}`) || [];\n      const totalSize = vault.files?.reduce((acc: number, f: any) => acc + (f.totalSize || f.size || 0), 0) || 0;\n\n      addRecord({\n        type: vault.encryptedClipboardText ? \"clipboard\" : \"vault\",\n        action: \"sent\",\n        accessCode: splitCode,\n        vaultId: vault.id,\n        fileNames,\n        fileCount: vault.files?.length || 0,\n        totalSize,\n        hasClipboard: !!vault.encryptedClipboardText,\n        createdAt: Date.now(),\n        expiresAt: new Date(vault.expiresAt).getTime(),\n        maxDownloads: vault.maxDownloads || 0,\n        downloadCount: vault.downloadCount || 0,\n      });\n    }\n  }, [vault, splitCode, addRecord]);\n\n  // Share Link logic\n  // User Requested: \"give only the link to pave for entering the pin\"\n  // So we just link to /access with the code in the hash fragment.\n  // The hash fragment is never sent to the server, preserving zero-knowledge.\n  // This allows auto-fill and auto-submit without manual entry.\n  const shareLink = `${window.location.origin}/access#code=${splitCode}`;\n\n  const handleCopy = async (text: string, type: 'link' | 'code') => {\n    await navigator.clipboard.writeText(text);\n    if (type === 'link') {\n      setCopiedLink(true);\n      setTimeout(() => setCopiedLink(false), 2000);\n    } else {\n      setCopiedCode(true);\n      setTimeout(() => setCopiedCode(false), 2000);\n    }\n    toast({\n      title: \"Copied to clipboard\",\n      description: type === 'link' ? \"Access link ready to share.\" : \"Access code ready to share.\",\n    });\n  };\n\n  const handleShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'Secure Vault',\n          text: 'Here is the comprehensive secure link to access the files.',\n          url: shareLink\n        });\n      } catch (err) {\n        console.error(\"Share failed\", err);\n      }\n    } else {\n      handleCopy(shareLink, 'link');\n    }\n  };\n\n  const handleSendEmail = async () => {\n    if (!email) {\n      toast({ variant: \"destructive\", title: \"Email Required\", description: \"Please enter a recipient email address.\" });\n      return;\n    }\n\n    // Normalize email to lowercase for case-insensitive handling (handles ALL CAPS, MixedCase, etc.)\n    const normalizedEmail = email.trim().toLowerCase();\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(normalizedEmail)) {\n      toast({ variant: \"destructive\", title: \"Invalid Email\", description: \"Please enter a valid email address.\" });\n      return;\n    }\n\n    setIsSending(true);\n    try {\n      const response = await fetch(`/api/vaults/${vaultId}/email`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ to: normalizedEmail, fullCode: splitCode }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Failed to send email\");\n      }\n\n      // Show Dialog Box\n      setShowSpamAlert(true);\n\n      toast({ title: \"âœ… Email Sent\", description: \"Recipient notified securely.\", className: \"bg-emerald-900/90 border-emerald-500\" });\n\n      // Track email in vault history\n      if (splitCode) {\n        updateRecord(splitCode, \"sent\", { lastEmailedTo: normalizedEmail, lastEmailedAt: Date.now() });\n      }\n\n      setEmail(\"\");\n    } catch (e: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Failed to send\",\n        description: e.message || \"Could not send email. Please try again.\"\n      });\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  return (\n    <div className={`min-h-screen relative overflow-hidden flex flex-col transition-colors duration-1000 ${isBurned ? 'bg-black' : 'bg-background'} text-foreground selection:bg-primary/30`}>\n      <BurnFilter />\n\n      {/* Background Ambience */}\n      <div className={`fixed inset-0 grid-bg opacity-30 pointer-events-none transition-opacity duration-1000 ${isBurned ? 'opacity-0' : ''}`} />\n      <div className=\"fixed top-[-10%] left-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none\" />\n      <div className=\"fixed bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none\" />\n\n      {/* Header */}\n      <header className=\"relative z-10 px-6 py-6 flex justify-between items-center max-w-6xl mx-auto w-full\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center border border-primary/20\">\n            <Shield className=\"w-6 h-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"font-bold font-mono tracking-tight text-lg leading-none\">SECURE<span className=\"text-primary\">VAULT</span></h1>\n            <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest\">Encrypted Transfer</p>\n          </div>\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => window.location.href = '/'}\n          className=\"gap-2 border-zinc-800 hover:bg-zinc-900\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" /> New Transfer\n        </Button>\n      </header>\n\n      {/* Main Content */}\n      <main\n        className=\"relative z-10 flex-1 w-full max-w-5xl mx-auto px-4 md:px-6 py-4 flex flex-col gap-8 transition-all duration-1000 origin-center\"\n        style={{\n          filter: isBurned ? 'url(#heat-wave) grayscale(100%) contrast(150%)' : 'none',\n          transform: isBurned ? 'scale(0.95)' : 'none',\n          opacity: isBurned ? 0 : 1\n        }}\n      >\n\n        {/* Hero Section: PIN & Insights Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch\">\n\n          {/* PIN Display */}\n          {splitCode && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className=\"glass-card p-6 md:p-8 flex flex-col items-center justify-center text-center border-l-4 border-l-primary relative overflow-hidden\"\n            >\n              <div className=\"absolute inset-0 bg-primary/5 animate-pulse rounded-3xl pointer-events-none\" />\n\n              <div className=\"flex items-center gap-2 mb-4\">\n                <div className=\"p-2 bg-primary/10 rounded-full\">\n                  <Key className=\"w-4 h-4 text-primary\" />\n                </div>\n                <span className=\"text-xs font-bold text-zinc-400 uppercase tracking-[0.2em]\">Access PIN</span>\n              </div>\n\n              <div className=\"flex items-center gap-4 mb-4 scale-110\">\n                <div className=\"font-mono text-5xl md:text-6xl font-black tracking-widest text-white drop-shadow-[0_0_25px_rgba(16,185,129,0.3)] select-all\">\n                  {splitCode.slice(0, 3)}-{splitCode.slice(3, 6)}\n                </div>\n              </div>\n\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"gap-2 text-zinc-500 hover:text-white hover:bg-white/5\"\n                onClick={() => handleCopy(splitCode, 'code')}\n              >\n                {copiedCode ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4\" />}\n                {copiedCode ? \"Copied\" : \"Copy Code\"}\n              </Button>\n            </motion.div>\n          )}\n\n          {/* Dashboard / Usefull Insights */}\n          {vault && (\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"glass-card p-6 flex flex-col justify-between gap-6\"\n            >\n              {/* Timer */}\n              <div className=\"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50\">\n                <div className=\"flex items-center gap-3 text-zinc-400\">\n                  <div className=\"p-2 bg-zinc-900 rounded-lg\">\n                    <Clock className=\"w-4 h-4\" />\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-bold uppercase tracking-wider\">Expiration</p>\n                    <p className=\"text-[10px] text-zinc-500\">Auto-deletion timer</p>\n                  </div>\n                </div>\n                <CountdownTimer expiresAt={vault.expiresAt} />\n              </div>\n\n              {/* Download Limit */}\n              <div className=\"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50\">\n                <div className=\"flex items-center gap-3 text-zinc-400\">\n                  <div className=\"p-2 bg-zinc-900 rounded-lg\">\n                    <Download className=\"w-4 h-4\" />\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-bold uppercase tracking-wider\">Downloads</p>\n                    <p className=\"text-[10px] text-zinc-500\">Remaining limit</p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"font-mono text-xl font-bold text-white\">\n                    {vault.maxDownloads - vault.downloadCount}\n                  </span>\n                  <span className=\"text-zinc-600 text-sm font-mono mx-1\">/</span>\n                  <span className=\"text-zinc-600 text-sm font-mono\">{vault.maxDownloads}</span>\n                </div>\n              </div>\n\n              {/* File Size */}\n              <div className=\"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50\">\n                <div className=\"flex items-center gap-3 text-zinc-400\">\n                  <div className=\"p-2 bg-zinc-900 rounded-lg\">\n                    <HardDrive className=\"w-4 h-4\" />\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-bold uppercase tracking-wider\">Total Size</p>\n                    <p className=\"text-[10px] text-zinc-500\">{vault.files.length} Files</p>\n                  </div>\n                </div>\n                <span className=\"font-mono text-base font-bold text-zinc-300\">\n                  {(vault.files.reduce((acc: any, f: any) => acc + f.totalSize, 0) / (1024 * 1024)).toFixed(2)} MB\n                </span>\n              </div>\n\n              {/* Upload Stats (If Available) */}\n              {uploadStats && (\n                <>\n                  <div className=\"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50\">\n                    <div className=\"flex items-center gap-3 text-zinc-400\">\n                      <div className=\"p-2 bg-zinc-900 rounded-lg\">\n                        <Timer className=\"w-4 h-4 text-amber-500\" />\n                      </div>\n                      <div>\n                        <p className=\"text-xs font-bold uppercase tracking-wider\">Transfer Time</p>\n                        <p className=\"text-[10px] text-zinc-500\">Encryption & Upload</p>\n                      </div>\n                    </div>\n                    <span className=\"font-mono text-base font-bold text-zinc-300\">\n                      {uploadStats.time < 1000 ? `${uploadStats.time}ms` : `${(uploadStats.time / 1000).toFixed(1)}s`}\n                    </span>\n                  </div>\n\n                  <div className=\"flex items-center justify-between p-3 bg-zinc-950/50 rounded-xl border border-zinc-800/50\">\n                    <div className=\"flex items-center gap-3 text-zinc-400\">\n                      <div className=\"p-2 bg-zinc-900 rounded-lg\">\n                        <Zap className=\"w-4 h-4 text-emerald-500\" />\n                      </div>\n                      <div>\n                        <p className=\"text-xs font-bold uppercase tracking-wider\">Speed</p>\n                        <p className=\"text-[10px] text-zinc-500\">Avg. Throughput</p>\n                      </div>\n                    </div>\n                    <span className=\"font-mono text-base font-bold text-zinc-300\">\n                      {uploadStats.speed < 1024 * 1024\n                        ? `${(uploadStats.speed / 1024).toFixed(1)} KB/s`\n                        : `${(uploadStats.speed / (1024 * 1024)).toFixed(1)} MB/s`}\n                    </span>\n                  </div>\n                </>\n              )}\n            </motion.div>\n          )}\n        </div>\n\n\n        <div className=\"flex flex-col lg:flex-row gap-8 items-start\">\n          {/* Left Column: QR (Dark Theme) */}\n          <div className=\"w-full lg:w-1/3 flex flex-col gap-6\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 }}\n              className=\"glass-card p-1 rounded-3xl overflow-hidden shadow-2xl\"\n            >\n              <div className=\"bg-zinc-950/80 p-8 rounded-[22px] flex flex-col items-center text-center relative overflow-hidden group\">\n\n                {/* Scanline Effect */}\n                <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-primary/5 to-transparent animate-scanline pointer-events-none\" />\n\n                <div className=\"relative bg-zinc-900/50 border border-zinc-800 p-4 rounded-2xl shadow-2xl mb-6 group-hover:border-primary/50 transition-colors duration-500\">\n                  {/* Clean Dark Themed QR */}\n                  <QRCodeSVG\n                    value={shareLink}\n                    size={200}\n                    level=\"H\"\n                    includeMargin={true}\n                    bgColor=\"#09090b\"  // zinc-950 background\n                    fgColor=\"#10b981\"  // emerald-500 (primary) modules\n                    className=\"w-full h-full rounded-lg\"\n                  />\n                  {/* Glowing Corners */}\n                  <div className=\"absolute -top-1 -left-1 w-6 h-6 border-t-2 border-l-2 border-primary rounded-tl-xl opacity-50\" />\n                  <div className=\"absolute -top-1 -right-1 w-6 h-6 border-t-2 border-r-2 border-primary rounded-tr-xl opacity-50\" />\n                  <div className=\"absolute -bottom-1 -left-1 w-6 h-6 border-b-2 border-l-2 border-primary rounded-bl-xl opacity-50\" />\n                  <div className=\"absolute -bottom-1 -right-1 w-6 h-6 border-b-2 border-r-2 border-primary rounded-br-xl opacity-50\" />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h2 className=\"text-xl font-bold text-white tracking-tight flex items-center justify-center gap-2\">\n                    <Smartphone className=\"w-5 h-5 text-primary\" />\n                    Scan to Download\n                  </h2>\n                  <p className=\"text-xs text-zinc-500 mx-auto\">\n                    Instant mobile access. No app required.\n                  </p>\n                </div>\n\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Right Column: Actions */}\n          <div className=\"w-full lg:w-2/3\">\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"glass-card h-full min-h-[450px] flex flex-col\"\n            >\n              {/* Tabs */}\n              <div className=\"flex border-b border-white/5\">\n                <button\n                  onClick={() => setActiveTab('link')}\n                  className={`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${activeTab === 'link' ? 'text-primary border-b-2 border-primary bg-primary/5' : 'text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900/50'}`}\n                >\n                  <Share2 className=\"w-4 h-4\" /> Share Link\n                </button>\n                <button\n                  onClick={() => setActiveTab('email')}\n                  className={`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${activeTab === 'email' ? 'text-primary border-b-2 border-primary bg-primary/5' : 'text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900/50'}`}\n                >\n                  <Mail className=\"w-4 h-4\" /> Email\n                </button>\n                <button\n                  onClick={() => setActiveTab('burn')}\n                  className={`flex-1 py-5 text-sm font-medium flex items-center justify-center gap-2 transition-all ${activeTab === 'burn' ? 'text-rose-500 border-b-2 border-rose-500 bg-rose-500/5' : 'text-zinc-500 hover:text-rose-400 hover:bg-rose-900/10'}`}\n                >\n                  <Trash2 className=\"w-4 h-4\" /> Burn\n                </button>\n              </div>\n\n              <div className=\"p-8 md:p-10 flex-1 flex flex-col justify-center\">\n                <AnimatePresence mode=\"wait\">\n                  {activeTab === 'link' && (\n                    <motion.div\n                      key=\"link\"\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: -10 }}\n                      className=\"flex-1 flex flex-col justify-center space-y-8\"\n                    >\n                      <div className=\"text-center space-y-2\">\n                        <h3 className=\"text-2xl font-bold tracking-tight\">Ready to Share</h3>\n                        <p className=\"text-zinc-400\">Copy the secure link below or use the share sheet.</p>\n                      </div>\n\n                      <div className=\"bg-zinc-950 p-5 rounded-xl border border-zinc-800 flex items-center gap-4 group hover:border-primary/30 transition-colors\">\n                        <div className=\"p-3 bg-zinc-900 rounded-lg group-hover:bg-primary/20 transition-colors\">\n                          <ExternalLink className=\"w-6 h-6 text-zinc-500 group-hover:text-primary\" />\n                        </div>\n                        <div className=\"flex-1 overflow-hidden\">\n                          <p className=\"text-xs text-zinc-500 uppercase font-bold mb-1\">Encrypted Link</p>\n                          <p className=\"text-sm md:text-base font-mono text-zinc-300 truncate selection:bg-primary/30\">{shareLink}</p>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <Button size=\"lg\" className=\"cyber-btn w-full h-14 text-base\" onClick={() => handleCopy(shareLink, 'link')}>\n                          {copiedLink ? \"COPIED!\" : \"COPY LINK\"}\n                        </Button>\n                        <Button size=\"lg\" variant=\"secondary\" className=\"w-full h-14 text-base border-zinc-700 bg-zinc-800 hover:bg-zinc-700\" onClick={handleShare}>\n                          OPEN SHARE SHEET\n                        </Button>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  {activeTab === 'email' && (\n                    <motion.div\n                      key=\"email\"\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: -10 }}\n                      className=\"flex-1 flex flex-col justify-center space-y-8\"\n                    >\n                      <div className=\"text-center space-y-2\">\n                        <h3 className=\"text-2xl font-bold tracking-tight\">Secure Dispatch</h3>\n                        <p className=\"text-zinc-400\">Send an automated email notification with access details.</p>\n                      </div>\n\n                      <div className=\"space-y-6\">\n                        <div className=\"space-y-2\">\n                          <label className=\"text-xs uppercase font-bold text-zinc-500 ml-1\">Recipient Email</label>\n                          <Input\n                            placeholder=\"recipient@example.com\"\n                            className=\"h-14 text-lg bg-zinc-950 border-zinc-800 focus:ring-primary/20\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                          />\n                        </div>\n                        <Button size=\"lg\" className=\"cyber-btn w-full h-14 text-base\" onClick={handleSendEmail} disabled={isSending}>\n                          {isSending ? <Loader2 className=\"w-6 h-6 animate-spin\" /> : \"SEND NOTIFICATION\"}\n                        </Button>\n                      </div>\n\n                      <div className=\"py-4 px-6 bg-primary/5 rounded-xl border border-primary/10 flex items-start gap-3\">\n                        <Shield className=\"w-5 h-5 text-primary shrink-0 mt-0.5\" />\n                        <p className=\"text-xs text-primary/80 leading-relaxed\">\n                          Security Note: We only send the unique access link and code. Actual files are never attached to emails, ensuring zero-knowledge privacy.\n                        </p>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  {activeTab === 'burn' && (\n                    <motion.div\n                      key=\"burn\"\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: -10 }}\n                      className=\"flex-1 flex flex-col justify-center space-y-8 text-center\"\n                    >\n                      <div className=\"w-24 h-24 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-2 border-2 border-rose-500/20 shadow-[0_0_30px_rgba(244,63,94,0.2)]\">\n                        <Trash2 className=\"w-10 h-10 text-rose-500\" />\n                      </div>\n                      <div className=\"space-y-4\">\n                        <h3 className=\"text-2xl font-bold text-rose-500\">Initiate Self-Destruct</h3>\n                        <p className=\"text-zinc-400 max-w-md mx-auto\">\n                          This will immediately purge all encryption keys, metadata, and file chunks from the server.\n                        </p>\n                      </div>\n\n                      <div className=\"p-4 bg-rose-950/30 border border-rose-900/50 rounded-xl\">\n                        <p className=\"text-sm text-rose-300 font-bold\">WARNING: THIS ACTION CANNOT BE UNDONE.</p>\n                      </div>\n\n                      <Button\n                        size=\"lg\"\n                        variant=\"destructive\"\n                        className=\"w-full h-14 text-base bg-rose-600 hover:bg-rose-700 font-bold tracking-wider\"\n                        onClick={handleBurn}\n                        disabled={isDeleting}\n                      >\n                        {isDeleting ? (\n                          <>\n                            <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\n                            DESTROYING...\n                          </>\n                        ) : \"CONFIRM DESTRUCTION\"}\n\n                      </Button>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n            </motion.div>\n          </div>\n\n        </div>\n      </main>\n\n      {/* Redesigned Check Spam Folder Dialog */}\n      <Dialog open={showSpamAlert} onOpenChange={setShowSpamAlert}>\n        <DialogContent className=\"sm:max-w-md bg-zinc-950 border border-zinc-800/80 text-zinc-100 shadow-2xl p-0 overflow-hidden\">\n\n          {/* Header Pattern */}\n          <div className=\"relative h-24 bg-zinc-900/50 flex items-center justify-center overflow-hidden\">\n            <div className=\"absolute inset-0 grid-bg opacity-20\" />\n            <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-zinc-950\" />\n\n            <div className=\"w-16 h-16 bg-emerald-500/10 rounded-2xl border border-emerald-500/20 flex items-center justify-center relative z-10 shadow-[0_0_30px_rgba(16,185,129,0.2)]\">\n              <Mail className=\"w-8 h-8 text-emerald-500\" />\n              <div className=\"absolute -bottom-2 -right-2 bg-zinc-950 rounded-full p-1 border border-zinc-800\">\n                <Check className=\"w-4 h-4 text-emerald-500\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"px-6 pb-6 pt-2 text-center\">\n            <DialogHeader className=\"mb-6\">\n              <DialogTitle className=\"text-xl font-bold text-white text-center\">Notification Sent</DialogTitle>\n              <DialogDescription className=\"text-center text-zinc-400\">\n                The secure access link has been successfully dispatched.\n              </DialogDescription>\n            </DialogHeader>\n\n            {/* Spam Alert - Redesigned */}\n            <div className=\"bg-amber-500/5 border border-amber-500/20 rounded-xl p-4 mb-6 text-left\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"p-2 bg-amber-500/10 rounded-lg shrink-0\">\n                  <AlertTriangle className=\"w-5 h-5 text-amber-500\" />\n                </div>\n                <div className=\"space-y-1\">\n                  <p className=\"text-sm font-bold text-amber-500\">Delivery Confirmation</p>\n                  <p className=\"text-xs text-amber-200/70 leading-relaxed\">\n                    If the email is not visible in the inbox within 2 minutes, it is highly likely in the <strong className=\"text-amber-200\">Spam</strong> or <strong className=\"text-amber-200\">Junk</strong> folder.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <Button\n              className=\"w-full h-12 bg-emerald-600 hover:bg-emerald-500 text-white font-bold tracking-wide rounded-xl shadow-lg shadow-emerald-900/20 transition-all\"\n              onClick={() => setShowSpamAlert(false)}\n            >\n              UNDERSTOOD\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n    </div>\n  );\n}\n"],"names":["BurnFilter","jsx","jsxs","CountdownTimer","expiresAt","timeLeft","setTimeLeft","useState","useEffect","update","now","diff","interval","Success","setLocation","useLocation","params","useRoute","splitCode","setSplitCode","toast","useToast","activeTab","setActiveTab","email","setEmail","isSending","setIsSending","isDeleting","setIsDeleting","isBurned","setIsBurned","copiedLink","setCopiedLink","copiedCode","setCopiedCode","uploadStats","setUploadStats","showSpamAlert","setShowSpamAlert","addRecord","updateRecord","useVaultHistory","historySavedRef","useRef","handleBurn","res","data","vaultId","vault","useGetVault","hash","codeMatch","time","speed","fileNames","f","totalSize","acc","shareLink","handleCopy","text","type","handleShare","err","handleSendEmail","normalizedEmail","response","e","Shield","Button","ArrowLeft","motion","Key","Check","Copy","Clock","Download","HardDrive","Fragment","Timer","Zap","QRCodeSVG","Smartphone","Share2","Mail","Trash2","AnimatePresence","ExternalLink","Input","Loader2","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","AlertTriangle"],"mappings":"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"}