{"version":3,"file":"download-CRssWmit.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/lock-open.js","../../../node_modules/@radix-ui/react-progress/node_modules/@radix-ui/react-context/dist/index.mjs","../../../node_modules/@radix-ui/react-progress/node_modules/@radix-ui/react-primitive/dist/index.mjs","../../../node_modules/@radix-ui/react-progress/dist/index.mjs","../../../client/src/components/ui/progress.tsx","../../../client/src/components/vault-card.tsx","../../../client/src/pages/download.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LockOpen = createLucideIcon(\"LockOpen\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { LockOpen as default };\n//# sourceMappingURL=lock-open.js.map\n","// src/create-context.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createContext2(rootComponentName, defaultContext) {\n  const Context = React.createContext(defaultContext);\n  Context.displayName = rootComponentName + \"Context\";\n  const Provider = (props) => {\n    const { children, ...context } = props;\n    const value = React.useMemo(() => context, Object.values(context));\n    return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n  };\n  Provider.displayName = rootComponentName + \"Provider\";\n  function useContext2(consumerName) {\n    const context = React.useContext(Context);\n    if (context) return context;\n    if (defaultContext !== void 0) return defaultContext;\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n  }\n  return [Provider, useContext2];\n}\nfunction createContextScope(scopeName, createContextScopeDeps = []) {\n  let defaultContexts = [];\n  function createContext3(rootComponentName, defaultContext) {\n    const BaseContext = React.createContext(defaultContext);\n    BaseContext.displayName = rootComponentName + \"Context\";\n    const index = defaultContexts.length;\n    defaultContexts = [...defaultContexts, defaultContext];\n    const Provider = (props) => {\n      const { scope, children, ...context } = props;\n      const Context = scope?.[scopeName]?.[index] || BaseContext;\n      const value = React.useMemo(() => context, Object.values(context));\n      return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n    };\n    Provider.displayName = rootComponentName + \"Provider\";\n    function useContext2(consumerName, scope) {\n      const Context = scope?.[scopeName]?.[index] || BaseContext;\n      const context = React.useContext(Context);\n      if (context) return context;\n      if (defaultContext !== void 0) return defaultContext;\n      throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n    }\n    return [Provider, useContext2];\n  }\n  const createScope = () => {\n    const scopeContexts = defaultContexts.map((defaultContext) => {\n      return React.createContext(defaultContext);\n    });\n    return function useScope(scope) {\n      const contexts = scope?.[scopeName] || scopeContexts;\n      return React.useMemo(\n        () => ({ [`__scope${scopeName}`]: { ...scope, [scopeName]: contexts } }),\n        [scope, contexts]\n      );\n    };\n  };\n  createScope.scopeName = scopeName;\n  return [createContext3, composeContextScopes(createScope, ...createContextScopeDeps)];\n}\nfunction composeContextScopes(...scopes) {\n  const baseScope = scopes[0];\n  if (scopes.length === 1) return baseScope;\n  const createScope = () => {\n    const scopeHooks = scopes.map((createScope2) => ({\n      useScope: createScope2(),\n      scopeName: createScope2.scopeName\n    }));\n    return function useComposedScopes(overrideScopes) {\n      const nextScopes = scopeHooks.reduce((nextScopes2, { useScope, scopeName }) => {\n        const scopeProps = useScope(overrideScopes);\n        const currentScope = scopeProps[`__scope${scopeName}`];\n        return { ...nextScopes2, ...currentScope };\n      }, {});\n      return React.useMemo(() => ({ [`__scope${baseScope.scopeName}`]: nextScopes }), [nextScopes]);\n    };\n  };\n  createScope.scopeName = baseScope.scopeName;\n  return createScope;\n}\nexport {\n  createContext2 as createContext,\n  createContextScope\n};\n//# sourceMappingURL=index.mjs.map\n","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/progress.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar PROGRESS_NAME = \"Progress\";\nvar DEFAULT_MAX = 100;\nvar [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\nvar [ProgressProvider, useProgressContext] = createProgressContext(PROGRESS_NAME);\nvar Progress = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : void 0;\n    return /* @__PURE__ */ jsx(ProgressProvider, { scope: __scopeProgress, value, max, children: /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"aria-valuemax\": max,\n        \"aria-valuemin\": 0,\n        \"aria-valuenow\": isNumber(value) ? value : void 0,\n        \"aria-valuetext\": valueLabel,\n        role: \"progressbar\",\n        \"data-state\": getProgressState(value, max),\n        \"data-value\": value ?? void 0,\n        \"data-max\": max,\n        ...progressProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nProgress.displayName = PROGRESS_NAME;\nvar INDICATOR_NAME = \"ProgressIndicator\";\nvar ProgressIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": getProgressState(context.value, context.max),\n        \"data-value\": context.value ?? void 0,\n        \"data-max\": context.max,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nProgressIndicator.displayName = INDICATOR_NAME;\nfunction defaultGetValueLabel(value, max) {\n  return `${Math.round(value / max * 100)}%`;\n}\nfunction getProgressState(value, maxValue) {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isValidMaxNumber(max) {\n  return isNumber(max) && !isNaN(max) && max > 0;\n}\nfunction isValidValueNumber(value, max) {\n  return isNumber(value) && !isNaN(value) && value <= max && value >= 0;\n}\nfunction getInvalidMaxError(propValue, componentName) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\nfunction getInvalidValueError(propValue, componentName) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\nvar Root = Progress;\nvar Indicator = ProgressIndicator;\nexport {\n  Indicator,\n  Progress,\n  ProgressIndicator,\n  Root,\n  createProgressScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","import { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport {\n  Copy, Check, Clock, Download, HardDrive,\n  Mail, AlertTriangle, ExternalLink, ShieldCheck, Loader2\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface VaultCardProps {\n  vaultId: string;\n  shortCode: string;\n  fullLink: string;\n  filesCount: number;\n  totalSize: number;\n  expiresAt: string;\n  downloads: number;\n  maxDownloads: number;\n  onSendEmail?: (email: string) => Promise<void>;\n}\n\n// -----------------------------------------------------------------------------\n// SUB-COMPONENTS\n// -----------------------------------------------------------------------------\n\nfunction CountdownDigit({ value, label }: { value: number; label: string }) {\n  return (\n    <div className=\"flex flex-col items-center gap-1\">\n      <div className=\"relative group\">\n        <div className=\"absolute -inset-0.5 bg-primary/20 rounded-lg blur opacity-50 group-hover:opacity-100 transition duration-500\"></div>\n        <div className=\"relative w-12 h-14 bg-zinc-900 border border-zinc-700 rounded-lg flex items-center justify-center overflow-hidden\">\n          <AnimatePresence mode=\"popLayout\">\n            <motion.span\n              key={value}\n              initial={{ y: 20, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              exit={{ y: -20, opacity: 0 }}\n              transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n              className=\"font-mono text-2xl font-bold text-primary\"\n            >\n              {value.toString().padStart(2, \"0\")}\n            </motion.span>\n          </AnimatePresence>\n\n          {/* Scanline overlay for digits */}\n          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-primary/5 to-transparent opacity-20 pointer-events-none\" />\n        </div>\n      </div>\n      <span className=\"text-[10px] uppercase font-bold text-zinc-600 tracking-wider font-mono\">\n        {label}\n      </span>\n    </div>\n  );\n}\n\nfunction Separator() {\n  return (\n    <div className=\"flex flex-col justify-start pt-4 h-14\">\n      <div className=\"space-y-2 animate-pulse\">\n        <div className=\"w-1 h-1 bg-zinc-600 rounded-full\" />\n        <div className=\"w-1 h-1 bg-zinc-600 rounded-full\" />\n      </div>\n    </div>\n  );\n}\n\n// -----------------------------------------------------------------------------\n// MAIN COMPONENT\n// -----------------------------------------------------------------------------\n\nexport function VaultCard({\n  vaultId,\n  shortCode,\n  fullLink,\n  filesCount,\n  totalSize,\n  expiresAt,\n  downloads,\n  maxDownloads,\n  onSendEmail,\n  className,\n  minimal = false,\n}: VaultCardProps & { className?: string; minimal?: boolean }) {\n  const [copiedLink, setCopiedLink] = useState(false);\n  const [copiedCode, setCopiedCode] = useState(false);\n\n  const [timeLeft, setTimeLeft] = useState<{ hours: number; minutes: number; seconds: number } | null>(null);\n  const [emailInput, setEmailInput] = useState(\"\");\n  const [isSendingEmail, setIsSendingEmail] = useState(false);\n  const { toast } = useToast();\n\n  // Calculate countdown timer\n  useEffect(() => {\n    const updateCountdown = () => {\n      const now = new Date().getTime();\n      const expiry = new Date(expiresAt).getTime();\n      const diff = expiry - now;\n\n      if (diff <= 0) {\n        setTimeLeft(null); // Expired\n        return;\n      }\n\n      const hours = Math.floor(diff / (1000 * 60 * 60));\n      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((diff % (1000 * 60)) / 1000);\n\n      setTimeLeft({ hours, minutes, seconds });\n    };\n\n    updateCountdown();\n    const interval = setInterval(updateCountdown, 1000);\n    return () => clearInterval(interval);\n  }, [expiresAt]);\n\n  const copyToClipboard = async (text: string, type: \"link\" | \"code\") => {\n    try {\n      await navigator.clipboard.writeText(text);\n      if (type === \"link\") {\n        setCopiedLink(true);\n        setTimeout(() => setCopiedLink(false), 2000);\n      } else {\n        setCopiedCode(true);\n        setTimeout(() => setCopiedCode(false), 2000);\n      }\n      toast({\n        title: \"Copied!\",\n        description: (\n          <div className=\"flex items-center gap-2\">\n            <Check className=\"w-4 h-4 text-primary\" />\n            <span>{type === 'link' ? 'Secure link' : 'Access code'} copied to clipboard.</span>\n          </div>\n        )\n      });\n    } catch (err) {\n      toast({ variant: \"destructive\", title: \"Failed to copy\" });\n    }\n  };\n\n  const handleSendEmail = async () => {\n    if (!emailInput || !onSendEmail) return;\n    setIsSendingEmail(true);\n    try {\n      await onSendEmail(emailInput);\n      setEmailInput(\"\");\n      toast({ title: \"Email Sent!\", description: \"Vault link sent successfully.\" });\n    } catch (err) {\n      toast({ variant: \"destructive\", title: \"Failed to send email\" });\n    } finally {\n      setIsSendingEmail(false);\n    }\n  };\n\n  const isExpired = timeLeft === null;\n  const isExpiringSoon = timeLeft ? timeLeft.hours === 0 && timeLeft.minutes < 60 : false;\n  const downloadProgress = (downloads / maxDownloads) * 100;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.4, ease: \"easeOut\" }}\n      className={`glass-card overflow-hidden ring-1 ring-white/10 ${className}`}\n    >\n      {/* Header Stripe & Active Status */}\n      <div className=\"relative h-1 w-full bg-zinc-900 pointer-events-none overflow-hidden\">\n        <div className={`absolute inset-0 bg-gradient-to-r from-transparent ${isExpired ? 'via-rose-500' : 'via-primary'} to-transparent w-1/2 animate-shimmer opacity-70`} />\n      </div>\n\n      <div className=\"p-5 md:p-8\">\n\n        {/* Optional Header Row */}\n        {!minimal && (\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 mb-8 md:mb-10\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"relative shrink-0\">\n                <div className=\"w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-zinc-800 to-zinc-900 rounded-2xl flex items-center justify-center border border-zinc-700 shadow-inner\">\n                  <HardDrive className={`w-7 h-7 md:w-8 md:h-8 ${isExpired ? 'text-rose-500' : 'text-primary'}`} />\n                </div>\n                <div className=\"absolute -bottom-1 -right-1 bg-zinc-900 rounded-full p-1 border border-zinc-800\">\n                  {isExpired ? <AlertTriangle className=\"w-3 h-3 md:w-4 md:h-4 text-rose-500\" /> : <ShieldCheck className=\"w-3 h-3 md:w-4 md:h-4 text-primary\" />}\n                </div>\n              </div>\n              <div>\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <h2 className=\"text-xl md:text-2xl font-bold font-mono tracking-tight text-foreground\">SECURE VAULT</h2>\n                  <span className={`px-2 py-0.5 rounded text-[10px] uppercase font-bold tracking-wider border ${isExpired\n                    ? 'bg-rose-500/10 border-rose-500/20 text-rose-500'\n                    : 'bg-primary/10 border-primary/20 text-primary'\n                    }`}>\n                    {isExpired ? 'Archived' : 'Active'}\n                  </span>\n                </div>\n                <p className=\"text-xs md:text-sm text-muted-foreground flex items-center gap-2\">\n                  <span className=\"font-medium text-foreground\">{filesCount}</span> {filesCount === 1 ? 'file' : 'files'}\n                  <span className=\"w-1 h-1 rounded-full bg-zinc-700\" />\n                  <span className=\"font-medium text-foreground\">{(totalSize / (1024 * 1024)).toFixed(2)}</span> MB\n                </p>\n              </div>\n            </div>\n\n            {/* Countdown Timer */}\n            <div className=\"flex flex-col items-end w-full md:w-auto mt-2 md:mt-0\">\n              <div className={`flex items-center gap-2 mb-2 text-xs uppercase font-bold tracking-widest ${isExpiringSoon || isExpired ? 'text-rose-500' : 'text-primary'}`}>\n                <Clock className=\"w-3.5 h-3.5\" />\n                {isExpired ? 'Vault Expired' : 'Auto-Purge In'}\n              </div>\n\n              {isExpired ? (\n                <div className=\"h-12 md:h-14 flex items-center px-4 bg-rose-500/10 border border-rose-500/20 rounded-lg w-full md:w-auto justify-center\">\n                  <span className=\"font-mono text-lg md:text-xl font-bold text-rose-500 tracking-widest\">DELETED</span>\n                </div>\n              ) : (\n                <div className=\"flex items-center justify-center gap-1.5 md:gap-2 bg-zinc-900/50 p-2 rounded-xl border border-zinc-800/50 backdrop-blur-sm w-full md:w-auto\">\n                  <CountdownDigit value={timeLeft?.hours || 0} label=\"HRS\" />\n                  <Separator />\n                  <CountdownDigit value={timeLeft?.minutes || 0} label=\"MIN\" />\n                  <Separator />\n                  <CountdownDigit value={timeLeft?.seconds || 0} label=\"SEC\" />\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Content Grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8\">\n\n          {/* Cyber QR Layout - Centered on Mobile */}\n          <div className=\"flex flex-col items-center order-1 lg:order-none\">\n            <div className=\"relative group w-full max-w-[240px] lg:max-w-none\">\n              {/* QR Container Frame */}\n              <div className=\"absolute -inset-0.5 bg-gradient-to-tr from-primary/50 to-emerald-600/50 rounded-2xl blur opacity-75 group-hover:opacity-100 transition duration-500\"></div>\n              <div className=\"relative bg-zinc-950 p-4 md:p-6 rounded-xl border border-primary/20 shadow-2xl overflow-hidden aspect-square flex items-center justify-center\">\n\n                {/* Scanning Animation */}\n                <motion.div\n                  className=\"absolute inset-0 bg-gradient-to-b from-transparent via-primary/10 to-transparent z-10\"\n                  animate={{ top: ['-100%', '100%'] }}\n                  transition={{ duration: 3, repeat: Infinity, ease: \"linear\" }}\n                />\n\n                <div className=\"bg-white p-2 rounded-lg relative z-0 w-full h-full flex items-center justify-center\">\n                  <QRCodeSVG\n                    value={fullLink}\n                    size={200}\n                    className=\"w-full h-full\"\n                    level=\"H\"\n                    includeMargin={true}\n                    bgColor=\"#FFFFFF\"\n                    fgColor=\"#16a34a\"\n                    imageSettings={{\n                      src: \"/vault-qr-icon.png\",\n                      height: 48,\n                      width: 48,\n                      excavate: true,\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n            <p className=\"mt-4 text-[10px] md:text-xs font-mono text-zinc-500 uppercase tracking-[0.2em] flex items-center gap-2\">\n              <span className=\"w-2 h-2 rounded-full bg-primary animate-pulse\" />\n              Scan to Access\n            </p>\n          </div>\n\n          {/* Access Details Panel */}\n          <div className=\"lg:col-span-2 space-y-4 md:space-y-5 order-2 lg:order-none\">\n            {/* Short Code & Link */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Code Box - Optimized to prevent breaking */}\n              <div className=\"p-4 bg-zinc-900 border border-zinc-800 rounded-xl relative group overflow-hidden flex flex-col justify-between min-h-[110px]\">\n                <div className=\"absolute top-0 right-0 p-2 opacity-50 group-hover:opacity-100 transition-opacity z-10\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => copyToClipboard(shortCode, \"code\")}\n                    className=\"h-8 w-8 hover:bg-zinc-800 text-zinc-400 hover:text-white\"\n                  >\n                    {copiedCode ? <Check className=\"w-4 h-4 text-primary\" /> : <Copy className=\"w-4 h-4\" />}\n                  </Button>\n                </div>\n                <div className=\"text-[10px] uppercase font-bold text-zinc-500 tracking-wider mb-1\">Access PIN</div>\n\n                <div className=\"flex-1 flex items-center justify-center w-full\">\n                  <div className=\"font-mono text-xl sm:text-2xl md:text-3xl font-bold text-primary tracking-widest drop-shadow-lg whitespace-nowrap\">\n                    {shortCode}\n                  </div>\n                </div>\n              </div>\n\n              {/* Downloads Box - Redesigned */}\n              <div className=\"p-4 bg-zinc-900 border border-zinc-800 rounded-xl relative flex flex-col justify-between min-h-[110px]\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"text-[10px] uppercase font-bold text-zinc-500 tracking-wider flex items-center gap-1.5\">\n                    <Download className=\"w-3 h-3\" />\n                    Downloads\n                  </div>\n                  <span className={`font-mono text-[10px] font-bold px-1.5 py-0.5 rounded border ${downloads >= maxDownloads\n                    ? 'bg-rose-500/10 border-rose-500/20 text-rose-500'\n                    : 'bg-zinc-800 border-zinc-700 text-zinc-300'\n                    }`}>\n                    {maxDownloads - downloads} LEFT\n                  </span>\n                </div>\n\n                {/* Segmented Progress Bar */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex gap-1 h-3 w-full\">\n                    {Array.from({ length: Math.min(maxDownloads, 20) }).map((_, i) => {\n                      const isUsed = i < downloads;\n                      // Calculate if this segment should be active (reverse logic: filled bars = used downloads? \n                      // Typically \"Downloads Remaining\" implies empty bars or filled bars representing used count.\n                      // Let's make \"filled\" = used.\n                      return (\n                        <div\n                          key={i}\n                          className={`flex-1 rounded-sm transition-all duration-300 ${isUsed\n                            ? 'bg-zinc-800' // Used downloads are dark/empty\n                            : 'bg-primary shadow-[0_0_10px_rgba(16,185,129,0.3)]' // Remaining are bright/filled\n                            }`}\n                        />\n                      );\n                    })}\n                  </div>\n                  <div className=\"flex justify-between items-center text-[10px] font-mono text-zinc-500\">\n                    <span>0</span>\n                    <span>{downloads} / {maxDownloads} used</span>\n                    <span>{maxDownloads}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Direct Link Field */}\n            <div>\n              <div className=\"relative group\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-primary/20 to-transparent rounded-xl blur opacity-0 group-hover:opacity-100 transition duration-500\" />\n                <div className=\"relative flex items-center bg-zinc-900/80 border border-zinc-700 hover:border-primary/50 rounded-xl p-1 pr-2 transition-colors\">\n                  <div className=\"h-10 w-10 flex items-center justify-center text-zinc-500 shrink-0\">\n                    <ExternalLink className=\"w-4 h-4\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0 px-2 overflow-hidden\">\n                    <div className=\"text-[10px] text-zinc-500 font-semibold uppercase tracking-wider mb-0.5\">Secure Link</div>\n                    <div className=\"text-sm font-mono text-zinc-300 truncate selection:bg-primary/30\">\n                      {fullLink}\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={() => copyToClipboard(fullLink, \"link\")}\n                    className=\"h-9 gap-2 shadow-sm font-medium shrink-0\"\n                  >\n                    {copiedLink ? <Check className=\"w-3.5 h-3.5\" /> : <Copy className=\"w-3.5 h-3.5\" />}\n                    <span className=\"hidden md:inline\">{copiedLink ? \"Copied\" : \"Copy\"}</span>\n                  </Button>\n                </div>\n              </div>\n            </div>\n\n            {/* Email Section */}\n            {onSendEmail && !isExpired && (\n              <div className=\"pt-4 mt-2\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <div className=\"p-1.5 bg-zinc-800 rounded-md\">\n                    <Mail className=\"w-4 h-4 text-zinc-400\" />\n                  </div>\n                  <span className=\"text-sm font-medium text-foreground\">Secure Send</span>\n                </div>\n                <div className=\"flex flex-col md:flex-row gap-2\">\n                  <Input\n                    type=\"email\"\n                    placeholder=\"Enter recipient email...\"\n                    value={emailInput}\n                    onChange={(e) => setEmailInput(e.target.value)}\n                    className=\"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 focus:border-primary/50 transition-colors\"\n                  />\n                  <Button\n                    onClick={handleSendEmail}\n                    disabled={!emailInput || isSendingEmail}\n                    className=\"w-full md:w-auto min-w-[100px] cyber-btn\"\n                  >\n                    {isSendingEmail ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Send\"}\n                  </Button>\n                </div>\n                <p className=\"text-[11px] text-zinc-500 mt-2 pl-1\">\n                  * Encrypted link sent only. No files attached.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Security Footer - Simplified on Mobile */}\n        <div className=\"mt-8 pt-6 border-t border-white/5 flex flex-col md:flex-row items-start gap-4\">\n          <div className=\"hidden md:block p-2 bg-rose-500/10 rounded-lg shrink-0\">\n            <AlertTriangle className=\"w-5 h-5 text-rose-500\" />\n          </div>\n          <div>\n            <div className=\"flex items-center gap-2 md:hidden mb-2 text-rose-500 font-bold text-sm\">\n              <AlertTriangle className=\"w-4 h-4\" />\n              <span>Self-Destruction Protocol</span>\n            </div>\n            <h4 className=\"hidden md:block text-sm font-bold text-rose-500 mb-1\">Self-Destruction Protocol Active</h4>\n            <p className=\"text-xs text-zinc-400 leading-relaxed max-w-2xl\">\n              This vault is encrypted with a unique key.\n              Once the limit is reached or timer expires, data is permanently purged.\n              <span className=\"text-zinc-300 font-medium\"> No recovery option.</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n","import { useEffect, useState, useRef } from \"react\";\nimport { useRoute, Link } from \"wouter\";\nimport { motion } from \"framer-motion\";\nimport {\n  Unlock, File, Download as DownloadIcon, Loader2, AlertTriangle,\n  ShieldCheck, Zap, ArrowLeft\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useGetVault, useGetChunkDownloadUrl, useTrackFileDownload } from \"@/hooks/use-vaults\";\nimport { importKey, decryptMetadata, decryptData, exportKey } from \"@/lib/crypto\";\nimport { VaultCard } from \"@/components/vault-card\";\n\n// Streamed Download Support\nimport {\n  initiateStreamDownload,\n  shouldUseStreamedDownload,\n  isServiceWorkerAvailable,\n  ChunkInfo,\n  DownloadProgress\n} from \"@/lib/downloadStream\";\n\ninterface DecryptedFile {\n  fileId: string;\n  name: string;\n  size: number;\n  type: string;\n  chunks: number;\n  isCompressed?: boolean;\n}\n\nexport default function DownloadPage() {\n  const [, paramsV] = useRoute(\"/v/:id\");\n  const [, paramsDownload] = useRoute(\"/download/:id\");\n  const vaultId = paramsV?.id || paramsDownload?.id;\n  const [decryptionKey, setDecryptionKey] = useState<CryptoKey | null>(null);\n  const [files, setFiles] = useState<DecryptedFile[]>([]);\n  const [isDecrypting, setIsDecrypting] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Download State\n  const [activeDownload, setActiveDownload] = useState<string | null>(null);\n  const [downloadProgress, setDownloadProgress] = useState(0);\n  const [downloadMethod, setDownloadMethod] = useState<'memory' | 'stream' | null>(null);\n\n  // Self-Destruct State\n  const [isDestructing, setIsDestructing] = useState(false);\n  const [isDestroyed, setIsDestroyed] = useState(false);\n\n  const { data: vault, isLoading, error: apiError } = useGetVault(vaultId || \"\");\n  const getDownloadUrl = useGetChunkDownloadUrl();\n  const trackFileDownload = useTrackFileDownload();\n  const { toast } = useToast();\n\n  // Per-file download tracking\n  const [fileDownloadStates, setFileDownloadStates] = useState<Map<string, {\n    fileId: string;\n    maxDownloads: number;\n    downloadCount: number;\n    remainingDownloads: number;\n    isExhausted: boolean;\n  }>>(new Map());\n  const [isDownloadingAll, setIsDownloadingAll] = useState(false);\n\n  // Worker Management\n  const workerRef = useRef<Worker | null>(null);\n\n  useEffect(() => {\n    workerRef.current = new Worker(new URL('../encryption.worker.ts', import.meta.url), { type: 'module' });\n    return () => workerRef.current?.terminate();\n  }, []);\n\n  useEffect(() => {\n    // 1. Extract Key from URL Hash\n    const hash = window.location.hash;\n    const keyStr = hash.replace('#key=', '');\n\n    if (!keyStr) {\n      setError(\"Missing decryption key. Invalid link.\");\n      setIsDecrypting(false);\n      return;\n    }\n\n    // 2. Import Key & Decrypt Metadata\n    const initVault = async () => {\n      if (!vault) return;\n\n      try {\n        const key = await importKey(keyStr);\n        setDecryptionKey(key);\n\n        const metadata = await decryptMetadata(vault.encryptedMetadata, key);\n\n        // Merge metadata with backend info\n        const mergedFiles = metadata.map((meta: any) => {\n          const backendFile = vault.files.find((f: any) => f.fileId === meta.fileId);\n          return {\n            ...meta,\n            chunks: backendFile?.chunkCount || 0,\n            isCompressed: backendFile?.isCompressed || false // Ensure schema supports this or we rely on metadata\n          };\n        });\n\n        setFiles(mergedFiles);\n\n        // Initialize per-file download states from vault files\n        const fileStates = new Map<string, {\n          fileId: string; maxDownloads: number; downloadCount: number;\n          remainingDownloads: number; isExhausted: boolean;\n        }>();\n        for (const file of vault.files) {\n          const maxDl = file.maxDownloads || vault.maxDownloads || 5;\n          const dlCount = file.downloadCount || 0;\n          fileStates.set(file.fileId, {\n            fileId: file.fileId,\n            maxDownloads: maxDl,\n            downloadCount: dlCount,\n            remainingDownloads: Math.max(0, maxDl - dlCount),\n            isExhausted: dlCount >= maxDl\n          });\n        }\n        setFileDownloadStates(fileStates);\n\n        setIsDecrypting(false);\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to decrypt vault. Key may be invalid.\");\n        setIsDecrypting(false);\n      }\n    };\n\n    if (vault) initVault();\n  }, [vault]);\n\n  const fetchChunkUrls = async (file: DecryptedFile) => {\n    const urls: ChunkInfo[] = [];\n    const batchSize = 10; // Request 10 URLs at a time\n\n    for (let i = 0; i < file.chunks; i += batchSize) {\n      const batchPromises = [];\n      for (let j = 0; j < batchSize && (i + j) < file.chunks; j++) {\n        batchPromises.push(\n          getDownloadUrl.mutateAsync({\n            vaultId: vaultId!,\n            fileId: file.fileId,\n            chunkIndex: i + j\n          }).then(res => ({\n            index: i + j,\n            downloadUrl: res.downloadUrl\n          }))\n        );\n      }\n      const batchResults = await Promise.all(batchPromises);\n      urls.push(...batchResults);\n\n      // Update progress purely for UX during preparation\n      setDownloadProgress((i / file.chunks) * 10); // First 10% is prep\n    }\n    return urls.sort((a, b) => a.index - b.index);\n  };\n\n  const handleDownload = async (file: DecryptedFile) => {\n    if (!decryptionKey || !vaultId) return;\n\n    setActiveDownload(file.fileId);\n    setDownloadProgress(0);\n\n    const useStream = shouldUseStreamedDownload(file.size);\n    setDownloadMethod(useStream ? 'stream' : 'memory');\n\n    try {\n      if (useStream) {\n        // === STREAMED DOWNLOAD ===\n        toast({ title: \"Optimizing Download\", description: \"Preparing secure stream...\" });\n\n        // 1. Fetch ALL chunk URLs (this takes time for large files)\n        // Ideally backend would have a \"get all URLs\" endpoint, but we batch it.\n        const chunkUrls = await fetchChunkUrls(file);\n\n        // 2. Initiate Stream\n        const result = await initiateStreamDownload(\n          file.fileId,\n          decryptionKey,\n          chunkUrls,\n          {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            fileId: file.fileId,\n            isCompressed: file.isCompressed\n          },\n          (prog: DownloadProgress) => {\n            // Normalize progress (10-100%)\n            setDownloadProgress(10 + (prog.progress * 0.9));\n          }\n        );\n\n        if (!result.success) throw new Error(result.error);\n\n      } else {\n        // === MEMORY DOWNLOAD (Fallback/Small Files) ===\n        const chunks: Uint8Array[] = [];\n        let downloadedSize = 0;\n\n        for (let i = 0; i < file.chunks; i++) {\n          // 1. Get Signed URL\n          const { downloadUrl } = await getDownloadUrl.mutateAsync({\n            vaultId,\n            fileId: file.fileId,\n            chunkIndex: i\n          });\n\n          // 2. Fetch Encrypted Chunk\n          const res = await fetch(downloadUrl);\n          const buffer = await res.arrayBuffer();\n\n          // 3. Separate IV and Data\n          const iv = new Uint8Array(buffer.slice(0, 12));\n          const encryptedData = buffer.slice(12);\n\n          // 4. Decrypt via Worker\n          const decryptedBuffer = await decryptWithWorker(encryptedData, iv, decryptionKey, file.isCompressed);\n          chunks.push(new Uint8Array(decryptedBuffer as ArrayBuffer));\n\n          // Update Progress\n          downloadedSize += (decryptedBuffer as ArrayBuffer).byteLength;\n          setDownloadProgress((downloadedSize / file.size) * 100);\n        }\n\n        // 5. Reassemble & Save\n        const blob = new Blob(chunks as BlobPart[], { type: file.type });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.name;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      }\n\n      // === POST DOWNLOAD ACTIONS ===\n      // Track per-file download\n      try {\n        const res = await trackFileDownload.mutateAsync({\n          vaultId: vaultId,\n          fileId: file.fileId\n        });\n\n        // Update per-file download states\n        if (res.files && res.files.length > 0) {\n          setFileDownloadStates(prev => {\n            const newMap = new Map(prev);\n            for (const fileResult of res.files) {\n              newMap.set(fileResult.fileId, {\n                fileId: fileResult.fileId,\n                maxDownloads: fileResult.maxDownloads,\n                downloadCount: fileResult.downloadCount,\n                remainingDownloads: fileResult.remainingDownloads,\n                isExhausted: fileResult.isExhausted\n              });\n            }\n            return newMap;\n          });\n        }\n\n        toast({ title: \"Download Complete\", description: `Saved ${file.name}` });\n\n        // Self-Destruct if all files exhausted\n        if (res.vaultExhausted) {\n          setTimeout(() => {\n            toast({\n              title: \"Self-Destruct Initiated\",\n              description: \"This link is burning...\",\n              variant: \"destructive\"\n            });\n            setIsDestructing(true);\n          }, 2000);\n\n          setTimeout(() => {\n            setIsDestroyed(true);\n          }, 4500);\n        }\n      } catch (trackErr) {\n        console.error(\"File download tracking failed\", trackErr);\n        toast({ title: \"Download Complete\", description: `Saved ${file.name} (tracking failed)` });\n      }\n\n    } catch (err) {\n      console.error(err);\n      toast({ variant: \"destructive\", title: \"Download Failed\", description: \"Encryption error or network failure.\" });\n    } finally {\n      setActiveDownload(null);\n      setDownloadProgress(0);\n      setDownloadMethod(null);\n    }\n  };\n\n  // Download All handler â€” downloads sequentially and tracks as a single batch\n  const handleDownloadAll = async () => {\n    if (!decryptionKey || !vaultId || files.length === 0) return;\n\n    // Filter out exhausted files\n    const downloadableFiles = files.filter(f => {\n      const state = fileDownloadStates.get(f.fileId);\n      return !state?.isExhausted;\n    });\n\n    if (downloadableFiles.length === 0) {\n      toast({ variant: \"destructive\", title: \"No Downloads Available\", description: \"All files have reached their download limit.\" });\n      return;\n    }\n\n    setIsDownloadingAll(true);\n\n    try {\n      // Download each file sequentially (skip tracking per-file)\n      for (let i = 0; i < downloadableFiles.length; i++) {\n        const file = downloadableFiles[i];\n        setActiveDownload(file.fileId);\n        setDownloadProgress(0);\n\n        const useStream = shouldUseStreamedDownload(file.size);\n        setDownloadMethod(useStream ? 'stream' : 'memory');\n\n        try {\n          if (useStream) {\n            const chunkUrls = await fetchChunkUrls(file);\n            const result = await initiateStreamDownload(\n              file.fileId, decryptionKey, chunkUrls,\n              { name: file.name, size: file.size, type: file.type, fileId: file.fileId, isCompressed: file.isCompressed },\n              (prog: DownloadProgress) => { setDownloadProgress(10 + (prog.progress * 0.9)); }\n            );\n            if (!result.success) throw new Error(result.error);\n          } else {\n            const chunks: Uint8Array[] = [];\n            let downloadedSize = 0;\n            for (let ci = 0; ci < file.chunks; ci++) {\n              const { downloadUrl } = await getDownloadUrl.mutateAsync({ vaultId, fileId: file.fileId, chunkIndex: ci });\n              const res = await fetch(downloadUrl);\n              const buffer = await res.arrayBuffer();\n              const iv = new Uint8Array(buffer.slice(0, 12));\n              const encryptedData = buffer.slice(12);\n              const decryptedBuffer = await decryptWithWorker(encryptedData, iv, decryptionKey, file.isCompressed);\n              chunks.push(new Uint8Array(decryptedBuffer as ArrayBuffer));\n              downloadedSize += (decryptedBuffer as ArrayBuffer).byteLength;\n              setDownloadProgress((downloadedSize / file.size) * 100);\n            }\n            const blob = new Blob(chunks as BlobPart[], { type: file.type });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url; a.download = file.name;\n            document.body.appendChild(a); a.click();\n            window.URL.revokeObjectURL(url); document.body.removeChild(a);\n          }\n        } catch (fileErr) {\n          console.error(`Failed to download ${file.name}:`, fileErr);\n          toast({ variant: \"destructive\", title: \"Download Failed\", description: `Failed to download ${file.name}` });\n        }\n      }\n\n      // Track all downloaded files in a single batch\n      try {\n        const downloadedFileIds = downloadableFiles.map(f => f.fileId);\n        const res = await trackFileDownload.mutateAsync({\n          vaultId: vaultId,\n          fileId: downloadedFileIds[0],\n          fileIds: downloadedFileIds\n        });\n\n        if (res.files && res.files.length > 0) {\n          setFileDownloadStates(prev => {\n            const newMap = new Map(prev);\n            for (const fileResult of res.files) {\n              newMap.set(fileResult.fileId, {\n                fileId: fileResult.fileId,\n                maxDownloads: fileResult.maxDownloads,\n                downloadCount: fileResult.downloadCount,\n                remainingDownloads: fileResult.remainingDownloads,\n                isExhausted: fileResult.isExhausted\n              });\n            }\n            return newMap;\n          });\n        }\n\n        toast({ title: \"Download Complete\", description: `${downloadableFiles.length} file(s) downloaded.` });\n\n        if (res.vaultExhausted) {\n          setTimeout(() => {\n            toast({ title: \"Self-Destruct Initiated\", description: \"This link is burning...\", variant: \"destructive\" });\n            setIsDestructing(true);\n          }, 2000);\n          setTimeout(() => { setIsDestroyed(true); }, 4500);\n        }\n      } catch (trackErr) {\n        console.error(\"Batch tracking failed\", trackErr);\n      }\n\n    } finally {\n      setActiveDownload(null);\n      setDownloadProgress(0);\n      setDownloadMethod(null);\n      setIsDownloadingAll(false);\n    }\n  };\n\n  const decryptWithWorker = (data: ArrayBuffer, iv: Uint8Array, key: CryptoKey, isCompressed?: boolean) => {\n    return new Promise<ArrayBuffer>((resolve, reject) => {\n      if (!workerRef.current) return reject(\"Worker not ready\");\n      const id = Math.random();\n\n      const handler = (e: MessageEvent) => {\n        if (e.data.id === id) {\n          workerRef.current?.removeEventListener('message', handler);\n          if (e.data.type === 'error') reject(e.data.error);\n          else resolve(e.data.decryptedData);\n        }\n      };\n\n      workerRef.current.addEventListener('message', handler);\n      workerRef.current.postMessage({ type: 'decrypt', data, iv, key, id, isCompressed }, [data]);\n    });\n  };\n\n  // === RENDER STATES ===\n\n  if (isDestroyed) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background p-4 animate-in fade-in duration-1000\">\n        <div className=\"max-w-md w-full text-center space-y-6\">\n          <div className=\"w-20 h-20 bg-zinc-900 border-2 border-zinc-800 rounded-full flex items-center justify-center mx-auto relative overflow-hidden group\">\n            <div className=\"absolute inset-0 bg-gradient-to-t from-destructive/20 to-transparent\" />\n            <ShieldCheck className=\"w-10 h-10 text-muted-foreground/50\" />\n          </div>\n          <div className=\"space-y-2\">\n            <h1 className=\"text-3xl font-bold font-mono text-muted-foreground uppercase tracking-widest\">\n              Link Terminated\n            </h1>\n            <p className=\"text-zinc-500\">\n              This vault has self-destructed. No data remains.\n            </p>\n          </div>\n          <Button onClick={() => window.location.href = '/'} variant=\"outline\" className=\"border-zinc-800 hover:bg-zinc-900 hover:text-white\">\n            Return to Safety\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <Loader2 className=\"w-10 h-10 text-primary animate-spin\" />\n      </div>\n    );\n  }\n\n  if (apiError || error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n        <div className=\"max-w-md w-full bg-card border border-destructive/30 rounded-xl p-8 text-center\">\n          <div className=\"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4 text-destructive\">\n            <AlertTriangle className=\"w-8 h-8\" />\n          </div>\n          <h2 className=\"text-xl font-bold mb-2\">Access Denied</h2>\n          <p className=\"text-muted-foreground mb-6\">\n            {error || (apiError as Error)?.message || \"Vault not found\"}\n          </p>\n          <Button onClick={() => window.location.href = '/'} variant=\"outline\">\n            Go Home\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen bg-background p-4 md:p-8 flex flex-col ${isDestructing ? 'burn-container' : ''}`}>\n      <div className=\"max-w-4xl mx-auto space-y-6 md:space-y-8 w-full flex-1\">\n\n        {/* Header */}\n        <header className=\"flex items-center justify-between mb-6 md:mb-8\">\n          <Link href=\"/\">\n            <div className=\"flex items-center gap-3 cursor-pointer\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-primary/20 rounded-lg flex items-center justify-center border border-primary/50 overflow-hidden\">\n                <img src=\"/icon-192x192.png\" alt=\"VaultBridge\" className=\"w-full h-full object-cover p-1\" />\n              </div>\n              <div>\n                <h1 className=\"text-lg md:text-xl font-bold font-mono tracking-tighter\">VAULT<span className=\"text-primary\">BRIDGE</span></h1>\n              </div>\n            </div>\n          </Link>\n\n          <Link href=\"/\">\n            <Button variant=\"ghost\" size=\"sm\" className=\"gap-2 text-muted-foreground hover:text-foreground hover:bg-secondary/50\">\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Return</span>\n            </Button>\n          </Link>\n        </header>\n\n        {/* Vault Info */}\n        {vault && (\n          <VaultCard\n            vaultId={vault.id}\n            shortCode={vault.shortCode}\n            fullLink={window.location.href.split('#')[0]}\n            filesCount={files.length}\n            totalSize={files.reduce((acc, f) => acc + f.size, 0)}\n            expiresAt={vault.expiresAt}\n            downloads={vault.downloadCount}\n            maxDownloads={vault.maxDownloads}\n          />\n        )}\n\n        {/* File List */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-base md:text-lg font-bold font-mono uppercase tracking-wider text-muted-foreground mb-2 md:mb-4\">\n            Encrypted Contents\n          </h3>\n\n          {isDecrypting ? (\n            <div className=\"p-6 md:p-8 text-center text-muted-foreground animate-pulse\">\n              <Unlock className=\"w-6 h-6 md:w-8 md:h-8 mx-auto mb-2 opacity-50\" />\n              <p className=\"text-sm md:text-base\">Decrypting metadata...</p>\n            </div>\n          ) : (\n            <>\n              {files.map((file) => {\n                const fileState = fileDownloadStates.get(file.fileId);\n                const remaining = fileState?.remainingDownloads ?? 0;\n                const maxDl = fileState?.maxDownloads ?? 0;\n                const isExhausted = fileState?.isExhausted ?? false;\n\n                return (\n                  <motion.div\n                    key={file.fileId}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className={`bg-card border rounded-xl p-4 flex flex-col md:flex-row md:items-center justify-between gap-4 group transition-colors ${isExhausted ? 'border-destructive/30 opacity-60' : 'border-border hover:border-primary/30'\n                      }`}\n                  >\n                    <div className=\"flex items-center gap-3 md:gap-4 overflow-hidden\">\n                      <div className=\"p-2 md:p-3 bg-secondary rounded-lg flex-shrink-0\">\n                        <File className={`w-5 h-5 md:w-6 md:h-6 ${isExhausted ? 'text-destructive' : 'text-primary'}`} />\n                      </div>\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-medium truncate text-sm md:text-base\">{file.name}</p>\n                        <div className=\"flex items-center gap-2 mt-0.5\">\n                          <p className=\"text-xs text-muted-foreground font-mono\">\n                            {(file.size / (1024 * 1024)).toFixed(2)} MB â€¢ {file.type || 'Unknown'}\n                          </p>\n                          <span className=\"w-1 h-1 rounded-full bg-muted-foreground/30\" />\n                          <span className={`text-[10px] font-bold uppercase ${isExhausted ? 'text-destructive' : remaining <= 1 ? 'text-amber-400' : 'text-primary'\n                            }`}>\n                            {remaining}/{maxDl} DL\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-4 w-full md:w-auto mt-2 md:mt-0\">\n                      {activeDownload === file.fileId ? (\n                        <div className=\"w-full md:w-48 space-y-2\">\n                          <div className=\"flex justify-between text-xs text-muted-foreground\">\n                            <span>{downloadMethod === 'stream' ? 'Stream ' : ''}Decrypting...</span>\n                            <span>{Math.round(downloadProgress)}%</span>\n                          </div>\n                          <Progress value={downloadProgress} className=\"h-1.5 md:h-2\" />\n                        </div>\n                      ) : (\n                        <Button\n                          onClick={() => handleDownload(file)}\n                          disabled={isExhausted || isDownloadingAll}\n                          className={`w-full md:w-auto font-mono text-sm md:text-base h-10 md:h-11 ${isExhausted\n                            ? 'bg-muted text-muted-foreground cursor-not-allowed'\n                            : 'bg-primary text-primary-foreground hover:bg-primary/90'\n                            }`}\n                        >\n                          {isExhausted ? (\n                            'Limit Reached'\n                          ) : shouldUseStreamedDownload(file.size) ? (\n                            <><Zap className=\"w-4 h-4 mr-2 text-amber-500\" />Download</>\n                          ) : (\n                            <><DownloadIcon className=\"w-4 h-4 mr-2\" />Download</>\n                          )}\n                        </Button>\n                      )}\n                    </div>\n                  </motion.div>\n                );\n              })}\n\n              {/* Download All Button */}\n              {files.length > 1 && (\n                <>\n                  <Button\n                    onClick={handleDownloadAll}\n                    disabled={isDownloadingAll || activeDownload !== null || (Array.from(fileDownloadStates.values()).every(f => f.isExhausted) && fileDownloadStates.size > 0)}\n                    className={`w-full h-12 mt-4 font-mono text-sm md:text-base uppercase tracking-wider ${Array.from(fileDownloadStates.values()).every(f => f.isExhausted) && fileDownloadStates.size > 0\n                      ? 'bg-muted text-muted-foreground cursor-not-allowed'\n                      : isDownloadingAll\n                        ? 'bg-primary/70 text-primary-foreground cursor-wait'\n                        : 'bg-primary text-primary-foreground hover:bg-primary/90'\n                      }`}\n                  >\n                    {isDownloadingAll ? (\n                      <><Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />Downloading All...</>\n                    ) : Array.from(fileDownloadStates.values()).every(f => f.isExhausted) && fileDownloadStates.size > 0 ? (\n                      'All Limits Reached'\n                    ) : (\n                      <><DownloadIcon className=\"w-4 h-4 mr-2\" />Download All Files</>\n                    )}\n                  </Button>\n                  <p className=\"text-[10px] md:text-xs text-center text-muted-foreground mt-4 opacity-70\">\n                  </p>\n                </>\n              )}\n            </>\n          )}\n        </div>\n\n        {/* Attribution Footer */}\n        <div className=\"mt-12 text-center pb-8 opacity-70 hover:opacity-100 transition-opacity\">\n          <div className=\"inline-flex flex-col items-center\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <ShieldCheck className=\"w-4 h-4 text-emerald-500\" />\n              <p className=\"text-sm font-medium text-zinc-300\">Securely shared via VaultBridge</p>\n            </div>\n            <a href=\"/\" className=\"text-xs text-primary hover:underline hover:text-emerald-400 transition-colors font-mono\">\n              Free encrypted file sharing\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["LockOpen","createLucideIcon","createContextScope","scopeName","createContextScopeDeps","defaultContexts","createContext3","rootComponentName","defaultContext","BaseContext","React.createContext","index","Provider","props","scope","children","context","Context","value","React.useMemo","jsx","useContext2","consumerName","React.useContext","createScope","scopeContexts","contexts","composeContextScopes","scopes","baseScope","scopeHooks","createScope2","overrideScopes","nextScopes","nextScopes2","useScope","currentScope","NODES","Primitive","primitive","node","Slot","createSlot","Node","React.forwardRef","forwardedRef","asChild","primitiveProps","Comp","PROGRESS_NAME","DEFAULT_MAX","createProgressContext","ProgressProvider","useProgressContext","Progress","__scopeProgress","valueProp","maxProp","getValueLabel","defaultGetValueLabel","progressProps","isValidMaxNumber","getInvalidMaxError","max","isValidValueNumber","getInvalidValueError","valueLabel","isNumber","getProgressState","INDICATOR_NAME","ProgressIndicator","indicatorProps","maxValue","propValue","componentName","Root","Indicator","className","ref","ProgressPrimitive.Root","cn","ProgressPrimitive.Indicator","CountdownDigit","label","jsxs","AnimatePresence","motion","Separator","VaultCard","vaultId","shortCode","fullLink","filesCount","totalSize","expiresAt","downloads","maxDownloads","onSendEmail","minimal","copiedLink","setCopiedLink","useState","copiedCode","setCopiedCode","timeLeft","setTimeLeft","emailInput","setEmailInput","isSendingEmail","setIsSendingEmail","toast","useToast","useEffect","updateCountdown","now","diff","hours","minutes","seconds","interval","copyToClipboard","text","type","Check","handleSendEmail","isExpired","isExpiringSoon","HardDrive","AlertTriangle","ShieldCheck","Clock","QRCodeSVG","Button","Copy","Download","_","i","isUsed","ExternalLink","Mail","Input","e","Loader2","DownloadPage","paramsV","useRoute","paramsDownload","decryptionKey","setDecryptionKey","files","setFiles","isDecrypting","setIsDecrypting","error","setError","activeDownload","setActiveDownload","downloadProgress","setDownloadProgress","downloadMethod","setDownloadMethod","isDestructing","setIsDestructing","isDestroyed","setIsDestroyed","vault","isLoading","apiError","useGetVault","getDownloadUrl","useGetChunkDownloadUrl","trackFileDownload","useTrackFileDownload","fileDownloadStates","setFileDownloadStates","isDownloadingAll","setIsDownloadingAll","workerRef","useRef","keyStr","key","importKey","mergedFiles","decryptMetadata","meta","backendFile","f","fileStates","file","maxDl","dlCount","err","fetchChunkUrls","urls","batchPromises","j","res","batchResults","a","b","handleDownload","useStream","shouldUseStreamedDownload","chunkUrls","result","initiateStreamDownload","prog","chunks","downloadedSize","downloadUrl","buffer","iv","encryptedData","decryptedBuffer","decryptWithWorker","blob","url","prev","newMap","fileResult","trackErr","handleDownloadAll","downloadableFiles","ci","fileErr","downloadedFileIds","data","isCompressed","resolve","reject","id","handler","Link","ArrowLeft","acc","Unlock","Fragment","fileState","remaining","isExhausted","File","Zap","DownloadIcon"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}